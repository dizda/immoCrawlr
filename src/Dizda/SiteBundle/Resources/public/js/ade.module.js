// ADE v1.0 http://toodledo.github.io/ADE/
"use strict",angular.module("ADE",[]).factory("ADE",["$rootScope",function(a){function e(a,b){var c={};return angular.isObject(a)?c=a:angular.isString(a)&&a.length>0&&(c=angular.fromJson(a)),$.each(b,function(a,b){angular.isDefined(c[a])||(c[a]=b)}),c}function f(b){b.id&&a.$broadcast("ADE-start",b.id)}function g(b,c,d,e){b.id&&a.$broadcast("ADE-finish",{id:b.id,oldVal:c,newVal:d,exit:e})}function h(a,b){a.bind("blur",function(){b(0)})}function i(a,b,c){a.bind("keydown",function(a){if(a.keyCode==9){a.preventDefault(),a.stopPropagation();var c=a.shiftKey?-1:1;b(c)}else a.keyCode==27&&(a.preventDefault(),a.stopPropagation(),b(3))}),c!==!0&&a.bind("keypress",function(a){if(a.keyCode==13){a.preventDefault(),a.stopPropagation();var c=a.shiftKey?-2:2;b(c)}})}var b="btn btn-mini btn-primary",c="ade-popup",d=["heart","film","music","camera","shopping-cart","flag","picture","gift","calendar","time","thumbs-up","thumbs-down","hand-right","hand-left","info-sign","question-sign","exclamation-sign","repeat","ban-circle","warning-sign","leaf","tint","fire","magnet","envelope","inbox","bookmark","file","bell","asterisk","globe","plane","road","lock","book","wrench","home","briefcase","map-marker","eye-open"];return a.ADE_hidePopup=function(a){var b=a?a.next("."+c):angular.element("."+c);b.length&&b.hasClass("open")&&b.removeClass("open").remove()},{parseSettings:e,begin:f,done:g,setupBlur:h,setupKeys:i,icons:d,popupClass:c,miniBtnClasses:b}}]);var DateJSLoadCultureInfo=function(a){a.toLowerCase()=="en-us"||a.toLowerCase()=="en"?Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"}}:Date.CultureInfo={name:"en-GB",englishName:"English (United Kingdom)",nativeName:"English (United Kingdom)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:1,twoDigitYearMax:2029,dateElementOrder:"dmy",formatPatterns:{shortDate:"dd/MM/yyyy",longDate:"dd MMMM yyyy",shortTime:"HH:mm",longTime:"HH:mm:ss",fullDateTime:"dd MMMM yyyy HH:mm:ss",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"dd MMMM",yearMonth:"MMMM yyyy"}}};DateJSLoadCultureInfo(window.navigator.userLanguage||window.navigator.language),Date.CultureInfo&&(Date.CultureInfo.regexPatterns={jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,lastDayOf:/^(last day of)|(last of)/i,firstDayOf:/^(first day of)|(first of)|(1st( day)? of)|first|1st/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence|in)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(t(erday)?)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m((on)?th)?s?/i,day:/^d(ay)?s?/i,year:/^yr(s)?|(y(ear)?s?)/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},Date.CultureInfo.timezones=[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]),function(){var a=Date,b=a.prototype,c=Date.CultureInfo,d=function(a,b){return b||(b=2),("000"+a).slice(b*-1)};b.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},b.setTimeToNow=function(){var a=new Date;return this.setHours(a.getHours()),this.setMinutes(a.getMinutes()),this.setSeconds(a.getSeconds()),this.setMilliseconds(a.getMilliseconds()),this},a.today=function(){return(new Date).clearTime()},a.compare=function(a,b){if(isNaN(a)||isNaN(b))throw new Error(a+" - "+b);if(a instanceof Date&&b instanceof Date)return a<b?-1:a>b?1:0;throw new TypeError(a+" - "+b)},a.equals=function(a,b){return a.compareTo(b)===0},a.getDayNumberFromName=function(a){var b=Date.CultureInfo.dayNames,c=Date.CultureInfo.abbreviatedDayNames,d=Date.CultureInfo.shortestDayNames,e=a.toLowerCase();for(var f=0;f<b.length;f++)if(b[f].toLowerCase()==e||c[f].toLowerCase()==e||d[f].toLowerCase()==e)return f;return-1},a.getMonthNumberFromName=function(a){var b=Date.CultureInfo.monthNames,c=Date.CultureInfo.abbreviatedMonthNames,d=a.toLowerCase();for(var e=0;e<b.length;e++)if(b[e].toLowerCase()==d||c[e].toLowerCase()==d)return e;return-1},a.isLeapYear=function(a){return a%4===0&&a%100!==0||a%400===0},a.getDaysInMonth=function(b,c){return[31,a.isLeapYear(b)?29:28,31,30,31,30,31,31,30,31,30,31][c]},a.getTimezoneAbbreviation=function(a){var b=Date.CultureInfo.timezones,c;for(var d=0;d<b.length;d++)if(b[d].offset===a)return b[d].name;return null},a.getTimezoneOffset=function(a){var b=Date.CultureInfo.timezones,c;for(var d=0;d<b.length;d++)if(b[d].name===a.toUpperCase())return b[d].offset;return null},b.clone=function(){return new Date(this.getTime())},b.compareTo=function(a){return Date.compare(this,a)},b.equals=function(a){return Date.equals(this,a||new Date)},b.between=function(a,b){return this.getTime()>=a.getTime()&&this.getTime()<=b.getTime()},b.isAfter=function(a){return this.compareTo(a||new Date)===1},b.isBefore=function(a){return this.compareTo(a||new Date)===-1},b.isToday=b.isSameDay=function(a){return this.clone().clearTime().equals((a||new Date).clone().clearTime())},b.addMilliseconds=function(a){return this.setMilliseconds(this.getMilliseconds()+a*1),this},b.addSeconds=function(a){return this.addMilliseconds(a*1e3)},b.addMinutes=function(a){return this.addMilliseconds(a*6e4)},b.addHours=function(a){return this.addMilliseconds(a*36e5)},b.addDays=function(a){return this.setDate(this.getDate()+a*1),this},b.addWeeks=function(a){return this.addDays(a*7)},b.addMonths=function(b){var c=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+b*1),this.setDate(Math.min(c,a.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},b.addYears=function(a){return this.addMonths(a*12)},b.add=function(a){if(typeof a=="number")return this._orient=a,this;var b=a;return b.milliseconds&&this.addMilliseconds(b.milliseconds),b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this};var e,f,g;b.getWeek=function(){var a,b,c,d,h,i,j,k,l,m;return e=e?e:this.getFullYear(),f=f?f:this.getMonth()+1,g=g?g:this.getDate(),f<=2?(a=e-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=0,i=g-1+31*(f-1)):(a=e,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),l=b-c,h=l+1,i=g+(153*(f-3)+2)/5+58+l),j=(a+b)%7,d=(i+j-h)%7,k=i+3-d|0,k<0?m=53-((j-l)/5|0):k>364+l?m=1:m=(k/7|0)+1,e=f=g=null,m},b.getISOWeek=function(){return e=this.getUTCFullYear(),f=this.getUTCMonth()+1,g=this.getUTCDate(),d(this.getWeek())},b.setWeek=function(a){return this.moveToDayOfWeek(1).addWeeks(a-this.getWeek())};var h=function(a,b,c,d){if(typeof a=="undefined")return!1;if(typeof a!="number")throw new TypeError(a+" is not a Number.");if(a<b||a>c)throw new RangeError(a+" is not a valid value for "+d+".");return!0};a.validateMillisecond=function(a){return h(a,0,999,"millisecond")},a.validateSecond=function(a){return h(a,0,59,"second")},a.validateMinute=function(a){return h(a,0,59,"minute")},a.validateHour=function(a){return h(a,0,23,"hour")},a.validateDay=function(b,c,d){return h(b,1,a.getDaysInMonth(c,d),"day")},a.validateMonth=function(a){return h(a,0,11,"month")},a.validateYear=function(a){return h(a,0,9999,"year")},b.set=function(b){return a.validateMillisecond(b.millisecond)&&this.addMilliseconds(b.millisecond-this.getMilliseconds()),a.validateSecond(b.second)&&this.addSeconds(b.second-this.getSeconds()),a.validateMinute(b.minute)&&this.addMinutes(b.minute-this.getMinutes()),a.validateHour(b.hour)&&this.addHours(b.hour-this.getHours()),a.validateMonth(b.month)&&this.addMonths(b.month-this.getMonth()),a.validateYear(b.year)&&this.addYears(b.year-this.getFullYear()),a.validateDay(b.day,this.getFullYear(),this.getMonth())&&this.addDays(b.day-this.getDate()),b.timezone&&this.setTimezone(b.timezone),b.timezoneOffset&&this.setTimezoneOffset(b.timezoneOffset),b.week&&h(b.week,0,53,"week")&&this.setWeek(b.week),cDate=new Date,b.year==undefined&&(b.month<cDate.getMonth()||b.month==cDate.getMonth()&&b.day<cDate.getDate())&&this.addYears(1),this},b.moveToFirstDayOfMonth=function(){return this.set({day:1})},b.moveToLastDayOfMonth=function(){return this.set({day:a.getDaysInMonth(this.getFullYear(),this.getMonth())})},b.moveToNthOccurrence=function(a,b){var c=0;if(b>0)c=b-1;else if(b===-1)return this.moveToLastDayOfMonth(),this.getDay()!==a&&this.moveToDayOfWeek(a,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(a,1).addWeeks(c)},b.moveToDayOfWeek=function(a,b){var c=(a-this.getDay()+7*(b||1))%7;return this.addDays(c===0?c+=7*(b||1):c)},b.moveToMonth=function(a,b){var c=(a-this.getMonth()+12*(b||1))%12;return this.addMonths(c===0?c+=12*(b||1):c)},b.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},b.getTimezone=function(){return a.getTimezoneAbbreviation(this.getUTCOffset())},b.setTimezoneOffset=function(a){var b=this.getTimezoneOffset(),c=Number(a)*-6/10;return this.addMinutes(c-b)},b.setTimezone=function(b){return this.setTimezoneOffset(a.getTimezoneOffset(b))},b.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},b.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()},b.getUTCOffset=function(){var a=this.getTimezoneOffset()*-10/6,b;return a<0?(b=(a-1e4).toString(),b.charAt(0)+b.substr(2)):(b=(a+1e4).toString(),"+"+b.substr(1))},b.toUnixTimestamp=function(){return Math.round(this.getTime()/1e3)},b.getMonthName=function(a){return Date.CultureInfo&&Date.CultureInfo.monthNames&&a>=0&&a<12?Date.CultureInfo.monthNames[a]:""},b.getElapsed=function(a){return(a||new Date)-this},b.toISOString||(b.toISOString=function(){function a(a){return a<10?"0"+a:a}return'"'+this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+'Z"'}),b._toString=b.toString,b.toString=function(a){var b=this;if(a&&a.length==1){var c=Date.CultureInfo.formatPatterns;b.t=b.toString;switch(a){case"d":return b.t(c.shortDate);case"D":return b.t(c.longDate);case"F":return b.t(c.fullDateTime);case"m":return b.t(c.monthDay);case"r":return b.t(c.rfc1123);case"s":return b.t(c.sortableDateTime);case"t":return b.t(c.shortTime);case"T":return b.t(c.longTime);case"u":return b.t(c.universalSortableDateTime);case"y":return b.t(c.yearMonth)}}var e=function(a){switch(a*1){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return a?a.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(a){if(a.charAt(0)==="\\")return a.replace("\\","");b.h=b.getHours;switch(a){case"hh":return d(b.h()<13?b.h()===0?12:b.h():b.h()-12);case"h":return b.h()<13?b.h()===0?12:b.h():b.h()-12;case"HH":return d(b.h());case"H":return b.h();case"mm":return d(b.getMinutes());case"m":return b.getMinutes();case"ss":return d(b.getSeconds());case"s":return b.getSeconds();case"yyyy":return d(b.getFullYear(),4);case"yy":return d(b.getFullYear());case"dddd":return Date.CultureInfo.dayNames[b.getDay()];case"ddd":return Date.CultureInfo.abbreviatedDayNames[b.getDay()];case"dd":return d(b.getDate());case"d":return b.getDate();case"MMMM":return Date.CultureInfo.monthNames[b.getMonth()];case"MMM":return Date.CultureInfo.abbreviatedMonthNames[b.getMonth()];case"MM":return d(b.getMonth()+1);case"M":return b.getMonth()+1;case"t":return b.h()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return b.h()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"S":return e(b.getDate());default:return a}}):this._toString()}}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=Number.prototype;b._orient=1,b._nth=null,b._is=!1,b._same=!1,b._isSecond=!1,d._dateElement="day",b.next=function(){return this._orient=1,this},a.next=function(){return a.today().next()},b.last=b.prev=b.previous=function(){return this._orient=-1,this},a.last=a.prev=a.previous=function(){return a.today().last()},b.is=function(){return this._is=!0,this},b.same=function(){return this._same=!0,this._isSecond=!1,this},b.today=function(){return this.same().day()},b.weekday=function(){return this._is?(this._is=!1,!this.is().sat()&&!this.is().sun()):!1},b.at=function(b){return typeof b=="string"?a.parse(this.toString("d")+" "+b):this.set(b)},d.fromNow=d.after=function(a){var b={};return b[this._dateElement]=this,(a?a.clone():new Date).add(b)},d.ago=d.before=function(a){var b={};return b[this._dateElement]=this*-1,(a?a.clone():new Date).add(b)};var e="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),f="january february march april may june july august september october november december".split(/\s/),g="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),h="Milliseconds Seconds Minutes Hours Date Week Month FullYear".split(/\s/),i="final first second third fourth fifth".split(/\s/),j;b.toObject=function(){var a={};for(var b=0;b<g.length;b++)a[g[b].toLowerCase()]=this["get"+h[b]]();return a},a.fromObject=function(a){return a.week=null,Date.today().set(a)};var k=function(b){return function(){if(this._is)return this._is=!1,this.getDay()==b;if(this._nth!==null){this._isSecond&&this.addSeconds(this._orient*-1),this._isSecond=!1;var c=this._nth;this._nth=null;var d=this.clone().moveToLastDayOfMonth();this.moveToNthOccurrence(b,c);if(this>d)throw new RangeError(a.getDayName(b)+" does not occur "+c+" times in the month of "+a.getMonthName(d.getMonth())+" "+d.getFullYear()+".");return this}return this.moveToDayOfWeek(b,this._orient)}},l=function(b){return function(){var c=a.today(),d=b-c.getDay();return b===0&&Date.CultureInfo.firstDayOfWeek===1&&c.getDay()!==0&&(d+=7),c.addDays(d)}};for(var m=0;m<e.length;m++)a[e[m].toUpperCase()]=a[e[m].toUpperCase().substring(0,3)]=m,a[e[m]]=a[e[m].substring(0,3)]=l(m),b[e[m]]=b[e[m].substring(0,3)]=k(m);var n=function(a){return function(){return this._is?(this._is=!1,this.getMonth()===a):this.moveToMonth(a,this._orient)}},o=function(b){return function(){return a.today().set({month:b,day:1})}};for(var p=0;p<f.length;p++)a[f[p].toUpperCase()]=a[f[p].toUpperCase().substring(0,3)]=p,a[f[p]]=a[f[p].substring(0,3)]=o(p),b[f[p]]=b[f[p].substring(0,3)]=n(p);var q=function(a){return function(){if(this._isSecond)return this._isSecond=!1,this;if(this._same){this._same=this._is=!1;var b=this.toObject(),c=(arguments[0]||new Date).toObject(),d="",e=a.toLowerCase();for(var f=g.length-1;f>-1;f--){d=g[f].toLowerCase();if(b[d]!=c[d])return!1;if(e==d)break}return!0}return a.substring(a.length-1)!="s"&&(a+="s"),this["add"+a](this._orient)}},r=function(a){return function(){return this._dateElement=a,this}};for(var s=0;s<g.length;s++)j=g[s].toLowerCase(),b[j]=b[j+"s"]=q(g[s]),d[j]=d[j+"s"]=r(j);b._ss=q("Second");var t=function(a){return function(b){return this._same?this._ss(arguments[0]):b||b===0?this.moveToNthOccurrence(b,a):(this._nth=a,a!==2||b!==undefined&&b!==null?this:(this._isSecond=!0,this.addSeconds(this._orient)))}};for(var u=0;u<i.length;u++)b[i[u]]=u===0?t(-1):t(u)}(),function(){Date.Parsing={Exception:function(a){this.message="Parse error at '"+a.substring(0,10)+" ...'"}};var a=Date.Parsing,b=a.Operators={rtoken:function(b){return function(c){var d=c.match(b);if(d)return[d[0],c.substring(d[0].length)];throw new a.Exception(c)}},token:function(a){return function(a){return b.rtoken(new RegExp("^s*"+a+"s*"))(a)}},stoken:function(a){return b.rtoken(new RegExp("^"+a))},until:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){c.push(d[0]),b=d[1];continue}break}return[c,b]}},many:function(a){return function(b){var c=[],d=null;while(b.length){try{d=a.call(this,b)}catch(e){return[c,b]}c.push(d[0]),b=d[1]}return[c,b]}},optional:function(a){return function(b){var c=null;try{c=a.call(this,b)}catch(d){return[null,b]}return[c[0],c[1]]}},not:function(b){return function(c){try{b.call(this,c)}catch(d){return[null,c]}throw new a.Exception(c)}},ignore:function(a){return a?function(b){var c=null;return c=a.call(this,b),[null,c[1]]}:null},product:function(){var a=arguments[0],c=Array.prototype.slice.call(arguments,1),d=[];for(var e=0;e<a.length;e++)d.push(b.each(a[e],c));return d},cache:function(b){var c={},d=null;return function(e){try{d=c[e]=c[e]||b.call(this,e)}catch(f){d=c[e]=f}if(d instanceof a.Exception)throw d;return d}},any:function(){var b=arguments;return function(c){var d=null;for(var e=0;e<b.length;e++){if(b[e]==null)continue;try{d=b[e].call(this,c)}catch(f){d=null}if(d)return d}throw new a.Exception(c)}},each:function(){var b=arguments;return function(c){var d=[],e=null;for(var f=0;f<b.length;f++){if(b[f]==null)continue;try{e=b[f].call(this,c)}catch(g){throw new a.Exception(c)}d.push(e[0]),c=e[1]}return[d,c]}},all:function(){var a=arguments,b=b;return b.each(b.optional(a))},sequence:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,c.length==1?c[0]:function(b){var f=null,g=null,h=[];for(var i=0;i<c.length;i++){try{f=c[i].call(this,b)}catch(j){break}h.push(f[0]);try{g=d.call(this,f[1])}catch(k){g=null;break}b=g[1]}if(!f)throw new a.Exception(b);if(g)throw new a.Exception(g[1]);if(e)try{f=e.call(this,f[1])}catch(l){throw new a.Exception(f[1])}return[h,f?f[1]:b]}},between:function(a,c,d){d=d||a;var e=b.each(b.ignore(a),c,b.ignore(d));return function(a){var b=e.call(this,a);return[[b[0][0],r[0][2]],b[1]]}},list:function(a,c,d){return c=c||b.rtoken(/^\s*/),d=d||null,a instanceof Array?b.each(b.product(a.slice(0,-1),b.ignore(c)),a.slice(-1),b.ignore(d)):b.each(b.many(b.each(a,b.ignore(c))),px,b.ignore(d))},set:function(c,d,e){return d=d||b.rtoken(/^\s*/),e=e||null,function(f){var g=null,h=null,i=null,j=null,k=[[],f],l=!1;for(var m=0;m<c.length;m++){i=null,h=null,g=null,l=c.length==1;try{g=c[m].call(this,f)}catch(n){continue}j=[[g[0]],g[1]];if(g[1].length>0&&!l)try{i=d.call(this,g[1])}catch(o){l=!0}else l=!0;!l&&i[1].length===0&&(l=!0);if(!l){var p=[];for(var q=0;q<c.length;q++)m!=q&&p.push(c[q]);h=b.set(p,d).call(this,i[1]),h[0].length>0&&(j[0]=j[0].concat(h[0]),j[1]=h[1])}j[1].length<k[1].length&&(k=j);if(k[1].length===0)break}if(k[0].length===0)return k;if(e){try{i=e.call(this,k[1])}catch(r){throw new a.Exception(k[1])}k[1]=i[1]}return k}},forward:function(a,b){return function(c){return a[b].call(this,c)}},replace:function(a,b){return function(c){var d=a.call(this,c);return[b,d[1]]}},process:function(a,b){return function(c){var d=a.call(this,c);return[b.call(this,d[0]),d[1]]}},min:function(b,c){return function(d){var e=c.call(this,d);if(e[0].length<b)throw new a.Exception(d);return e}}},c=function(a){return function(){var b=null,c=[];arguments.length>1?b=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(b=arguments[0]);if(!b)return a.apply(null,arguments);for(var d=0,e=b.shift();d<e.length;d++)return b.unshift(e[d]),c.push(a.apply(null,b)),b.shift(),c}},d="optional not ignore cache".split(/\s/);for(var e=0;e<d.length;e++)b[d[e]]=c(b[d[e]]);var f=function(a){return function(){return arguments[0]instanceof Array?a.apply(null,arguments[0]):a.apply(null,arguments)}},g="each any all".split(/\s/);for(var h=0;h<g.length;h++)b[g[h]]=f(b[g[h]])}(),function(){var a=Date,b=a.prototype,c=a.CultureInfo,d=function(a){var b=[];for(var c=0;c<a.length;c++)a[c]instanceof Array?b=b.concat(d(a[c])):a[c]&&b.push(a[c]);return b};a.Grammar={},a.Translator={hour:function(a){return function(){this.hour=Number(a)}},minute:function(a){return function(){this.minute=Number(a)}},second:function(a){return function(){this.second=Number(a)}},meridian:function(a){return function(){this.meridian=a.slice(0,1).toLowerCase()}},timezone:function(a){return function(){var b=a.replace(/[^\d\+\-]/g,"");b.length?this.timezoneOffset=Number(b):this.timezone=a.toLowerCase()}},day:function(a){var b=a[0];return function(){this.day=Number(b.match(/\d+/)[0])}},month:function(a){return function(){this.month=a.length==3?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(a)/4:Number(a)-1}},year:function(a){return function(){var b=Number(a);this.year=a.length>2?b:b+(b+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(a){return function(){switch(a){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(b){b=b instanceof Array?b:[b];for(var c=0;c<b.length;c++)b[c]&&b[c].call(this);var d=new Date;(this.hour||this.minute)&&!this.month&&!this.year&&!this.day&&(this.day=d.getDate()),this.year||(this.year=d.getFullYear()),!this.month&&this.month!==0&&(this.month=d.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.day>a.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?e.set({timezone:this.timezone}):this.timezoneOffset&&e.set({timezoneOffset:this.timezoneOffset}),e},finish:function(b){b=b instanceof Array?d(b):[b];if(b.length===0)return null;for(var c=0;c<b.length;c++)typeof b[c]=="function"&&b[c].call(this);var e=a.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(e=new Date);var f=!!(this.days&&this.days!==null||this.orient||this.operator),g,h,i;i=this.orient=="past"||this.operator=="subtract"?-1:1;if(this.orient=="lastDayOf"){var j=new Date(this.year||e.getFullYear(),this.month+1,0);if(j.getDate())return!this.year&&(j.getMonth()<e.getMonth()||j.getMonth()==e.getMonth()&&j.getDate()<e.getDate())&&j.addYears(1),j}if(this.orient=="firstDayOf"){var k=new Date(this.year||e.getFullYear(),this.month,1);if(k.getDate())return!this.year&&(k.getMonth()<e.getMonth()||k.getMonth()==e.getMonth()&&k.getDate()<e.getDate())&&k.addYears(1),k}!this.now&&"hour minute second".indexOf(this.unit)!=-1&&e.setTimeToNow(),(this.month||this.month===0)&&"year day hour minute second".indexOf(this.unit)!=-1&&(this.value=this.month+1,this.month=null,f=!0);if(!f&&this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate(),this.month||(this.month=l.getMonth()),this.year=l.getFullYear()}f&&this.weekday&&this.unit!="month"&&(this.unit="day",g=a.getDayNumberFromName(this.weekday)-e.getDay(),h=7,this.days=g?(g+i*h)%h:i*h),this.month&&this.unit=="day"&&this.operator&&(this.value=this.month+1,this.month=null),this.value!=null&&this.month!=null&&this.year!=null&&(this.day=this.value*1),this.month&&!this.day&&this.value&&(e.set({day:this.value*1}),f||(this.day=this.value*1)),!this.month&&this.value&&this.unit=="month"&&!this.now&&(this.month=this.value,f=!0),f&&(this.month||this.month===0)&&this.unit!="year"&&(this.unit="month",g=this.month-e.getMonth(),h=12,this.months=this.value,this.month=null),this.unit||(this.unit="day");if(!this.value&&this.operator&&this.operator!==null&&this[this.unit+"s"]&&this[this.unit+"s"]!==null)this[this.unit+"s"]=this[this.unit+"s"]+(this.operator=="add"?1:-1)+(this.value||0)*i;else if(this[this.unit+"s"]==null||this.operator!=null)this.value||(this.value=1),this[this.unit+"s"]=this.value*i;this.meridian&&this.hour&&(this.meridian=="p"&&this.hour<12?this.hour=this.hour+12:this.meridian=="a"&&this.hour==12&&(this.hour=0));if(this.weekday&&!this.day&&!this.days){var l=Date[this.weekday]();this.day=l.getDate(),l.getMonth()!==e.getMonth()&&(this.month=l.getMonth())}return(this.month||this.month===0)&&!this.day&&(this.day=1),!this.orient&&!this.operator&&this.unit=="week"&&this.value&&!this.day&&!this.month&&this.value&&(this.operator="add",f=!0),this.month!=undefined&&this.unit=="week"&&(this.value=this.month+1,this[this.unit+"s"]=this.value,this.operator="add",this.month=null,this.day=null,f=!0),this.unit=="month"&&this.day==1&&this.value==1&&(this.operator="add",this.value=this[this.unit+"s"]=this.month+1,this.day=this.month=null,f=!0),f&&this.timezone&&this.day&&this.days&&(this.day=this.days),f?e.add(this):e.set(this)}};var e=a.Parsing.Operators,f=a.Grammar,g=a.Translator,h;f.datePartDelimiter=e.rtoken(/^([\s\-\.\,\/\x27]+)/),f.timePartDelimiter=e.stoken(":"),f.whiteSpace=e.rtoken(/^\s*/),f.generalDelimiter=e.rtoken(/^(([\s\,]|at|@|on)+)/);var i={};f.ctoken=function(a){var b=i[a];if(!b){var c=Date.CultureInfo.regexPatterns,d=a.split(/\s+/),f=[];for(var g=0;g<d.length;g++)f.push(e.replace(e.rtoken(c[d[g]]),d[g]));b=i[a]=e.any.apply(null,f)}return b},f.ctoken2=function(a){return e.rtoken(Date.CultureInfo.regexPatterns[a])},f.h=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),g.hour)),f.hh=e.cache(e.process(e.rtoken(/^(0[0-9]|1[0-2])/),g.hour)),f.H=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),g.hour)),f.HH=e.cache(e.process(e.rtoken(/^([0-1][0-9]|2[0-3])/),g.hour)),f.m=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.minute)),f.mm=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.minute)),f.s=e.cache(e.process(e.rtoken(/^([0-5][0-9]|[0-9])/),g.second)),f.ss=e.cache(e.process(e.rtoken(/^[0-5][0-9]/),g.second)),f.hms=e.cache(e.sequence([f.H,f.m,f.s],f.timePartDelimiter)),f.t=e.cache(e.process(f.ctoken2("shortMeridian"),g.meridian)),f.tt=e.cache(e.process(f.ctoken2("longMeridian"),g.meridian)),f.z=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zz=e.cache(e.process(e.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),g.timezone)),f.zzz=e.cache(e.process(f.ctoken2("timezone"),g.timezone)),f.timeSuffix=e.each(e.ignore(f.whiteSpace),e.set([f.tt,f.zzz])),f.time=e.each(e.optional(e.ignore(e.stoken("T"))),f.hms,f.timeSuffix),f.d=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1]|\d)/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.dd=e.cache(e.process(e.each(e.rtoken(/^([0-2]\d|3[0-1])/),e.optional(f.ctoken2("ordinalSuffix"))),g.day)),f.ddd=f.dddd=e.cache(e.process(f.ctoken("sun mon tue wed thu fri sat"),function(a){return function(){this.weekday=a}})),f.M=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d|\d)/),g.month)),f.MM=e.cache(e.process(e.rtoken(/^(1[0-2]|0\d)/),g.month)),f.MMM=f.MMMM=e.cache(e.process(f.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),g.month)),f.y=e.cache(e.process(e.rtoken(/^(\d\d?)/),g.year)),f.yy=e.cache(e.process(e.rtoken(/^(\d\d)/),g.year)),f.yyy=e.cache(e.process(e.rtoken(/^(\d\d?\d?\d?)/),g.year)),f.yyyy=e.cache(e.process(e.rtoken(/^(\d\d\d\d)/),g.year)),h=function(){return e.each(e.any.apply(null,arguments),e.not(f.ctoken2("timeContext")))},f.day=h(f.d,f.dd),f.month=h(f.M,f.MMM),f.year=h(f.yyyy,f.yy),f.orientation=e.process(f.ctoken("lastDayOf firstDayOf past future"),function(a){return function(){this.orient=a}}),f.operator=e.process(f.ctoken("add subtract"),function(a){return function(){this.operator=a}}),f.rday=e.process(f.ctoken("yesterday tomorrow today now"),g.rday),f.unit=e.process(f.ctoken("second minute hour day week month year"),function(a){return function(){this.unit=a}}),f.value=e.process(e.rtoken(/^\d\d?(st|nd|rd|th)?/),function(a){return function(){this.value=a.replace(/\D/g,"")}}),f.expression=e.set([f.rday,f.operator,f.value,f.unit,f.orientation,f.ddd,f.MMM,f.yyyy]),h=function(){return e.set(arguments,f.datePartDelimiter)},f.mdy=h(f.ddd,f.month,f.day,f.year),f.ymd=h(f.ddd,f.year,f.month,f.day),f.dmy=h(f.ddd,f.day,f.month,f.year),f.date=function(a){return(f[Date.CultureInfo.dateElementOrder]||f.mdy).call(this,a)},f.format=e.process(e.many(e.any(e.process(e.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(b){if(f[b])return f[b];throw a.Parsing.Exception(b)}),e.process(e.rtoken(/^[^dMyhHmstz]+/),function(a){return e.ignore(e.stoken(a))}))),function(a){return e.process(e.each.apply(null,a),g.finishExact)});var j={},k=function(a){return j[a]=j[a]||f.format(a)[0]};f.formats=function(a){if(a instanceof Array){var b=[];for(var c=0;c<a.length;c++)b.push(k(a[c]));return e.any.apply(null,b)}return k(a)},f._formats=f.formats([]),f._start=e.process(e.set([f.date,f.time,f.expression],f.generalDelimiter,f.whiteSpace),g.finish),f.start=function(a){try{var b=f._formats.call({},a);if(b[1].length===0)return b}catch(c){}return f._start.call({},a)},a._parse=a.parse,a.parse=function(b){var c=null;if(!b)return null;if(b instanceof Date)return b;try{c=a.Grammar.start.call({},b.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(d){return null}return c[1].length===0?c[0]:null},a.getParseFunction=function(b){var c=a.Grammar.formats(b);return function(a){var b=null;try{b=c.call({},a)}catch(d){return null}return b[1].length===0?b[0]:null}},a.parseExact=function(b,c){return a.getParseFunction(c)(b)}}();var parseDateString=function(a,b){var c=Date.parse(a);return c!=null?b?c.toString():c.toUnixTimestamp():null};angular.module("ADE").directive("adeNumber",["ADE","$compile",function(a,b){return{require:"?ngModel",restrict:"A",link:function(c,d,e,f){var g={},h=!1,i=null,j="",k="",l=0;f!==null&&(f.$render=function(){k=j=f.$modelValue;if(j===undefined||j===null)j="";return f.$viewValue});var m=function(b){k=j,l=b,b!=3&&(j=i.val(),j=j.replace(/[^0-9.]/g,""),j=parseFloat(j),f.$setViewValue(j)),d.show(),i.remove(),h=!1,a.done(g,k,j,l),c.$digest()};return d.bind("click",function(){if(h)return;h=!0,l=0,a.begin(g),angular.isNumber(j)||(j=parseFloat(j.replace(/[$]/g,""))),j=j?j:"",d.hide(),b('<input type="text" class="'+g.className+'" value="'+j+'" />')(c).insertAfter(d),i=d.next("input"),i.focus(),a.setupBlur(i,m),a.setupKeys(i,m)}),e.$observe("adeNumber",function(b){return g=a.parseSettings(b,{className:"input-small"}),d})}}}]),angular.module("ADE").directive("adeUrl",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",link:function(d,e,f,g){var h={},i=!1,j=null,k="",l="",m=0,n=null;g!==null&&(g.$render=function(){l=k=g.$modelValue;if(k===undefined||k===null)k="";return g.$viewValue});var o=function(b){l=k,m=b,m!==3&&j&&(k=j.val(),g.$setViewValue(k)),e.show(),d.ADE_hidePopup(),j&&j.remove(),i=!1,a.done(h,l,k,m),d.$digest()},p=function(){n&&window.clearTimeout(n),i=!0,m=0,a.begin(h),e.hide(),d.ADE_hidePopup(),b('<input type="text" class="'+h.className+'" value="'+k+'" />')(d).insertAfter(e),j=e.next("input"),j.focus(),a.setupBlur(j,o),a.setupKeys(j,o)};return e.bind("click",function(f){f.preventDefault(),f.stopPropagation();if(i)return;var g=k.toString(),j=!1,l=e.offset(),m=l.left,q=l.top+e[0].offsetHeight,r="";switch(h.type){case"email":j=c("email")(k).match("mailto:"),g.match("mailto:")||(g="mailto:"+g),r='<div class="'+a.popupClass+' ade-links dropdown-menu open" style="left:'+m+"px;top:"+q+'px">'+'<a class="'+a.miniBtnClasses+'" href="'+g+'" ng-click="ADE_hidePopup();">Send Email</a>'+' or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>";break;case"phone":j=c("phone")(k).match("tel:"),g.match("tel:")||(g="tel:"+g),r='<div class="'+a.popupClass+' ade-links dropdown-menu open" style="left:'+m+"px;top:"+q+'px">'+'<a class="'+a.miniBtnClasses+'" href="'+g+'" ng-click="ADE_hidePopup();">Call Number</a>'+' or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>";break;default:j=c("url")(k).match("http://"),g.match("http://")||(g="http://"+g),r='<div class="'+a.popupClass+' ade-links dropdown-menu open" style="left:'+m+"px;top:"+q+'px">'+'<a class="'+a.miniBtnClasses+'" href="'+g+'" target="_blank" ng-click="ADE_hidePopup();">Follow Link</a>'+' or <a class="'+a.miniBtnClasses+' ade-edit-link">Edit</a>'+'<div class="ade-hidden"><input class="invisinput" type="text" /></div>'+"</div>"}if(k!==""&&j){if(!e.next("."+a.popupClass).length){b(r)(d).insertAfter(e);var s=e.next(".ade-links").find(".ade-edit-link");s.bind("click",p);var t=e.next(".ade-links").find(".invisinput");t.focus(),a.setupKeys(t,o),t.bind("blur",function(a){n=window.setTimeout(function(){d.ADE_hidePopup(e)},300)})}}else p()}),f.$observe("adeUrl",function(b){return h=a.parseSettings(b,{className:"input-medium",type:"http"}),e})}}}]),!function(a){var b=function(b,d){this.element=a(b),this.picker=a(c.template).appendTo("body").on({click:a.proxy(this.click,this),mousedown:a.proxy(this.mousedown,this)}),this.isInput=this.element.is("input"),this.component=this.element.is(".date")?this.element.find(".add-on"):!1,this.isInput?this.element.on({focus:a.proxy(this.show,this),blur:a.proxy(this.hide,this),keyup:a.proxy(this.update,this)}):this.component?this.component.on("click",a.proxy(this.show,this)):this.element.on("click",a.proxy(this.show,this)),this.minViewMode=d.minViewMode||this.element.data("date-minviewmode")||0;if(typeof this.minViewMode=="string")switch(this.minViewMode){case"months":this.minViewMode=1;break;case"years":this.minViewMode=2;break;default:this.minViewMode=0}this.viewMode=d.viewMode||this.element.data("date-viewmode")||0;if(typeof this.viewMode=="string")switch(this.viewMode){case"months":this.viewMode=1;break;case"years":this.viewMode=2;break;default:this.viewMode=0}this.startViewMode=this.viewMode,this.weekStart=d.weekStart||this.element.data("date-weekstart")||0,this.weekEnd=this.weekStart===0?6:this.weekStart-1,this.fillDow(),this.fillMonths(),this.update(),this.showMode()};b.prototype={constructor:b,show:function(b){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.place(),a(window).on("resize",a.proxy(this.place,this)),b&&(b.stopPropagation(),b.preventDefault()),this.isInput||a(document).on("mousedown",a.proxy(this.hide,this)),this.element.trigger({type:"show",date:this.date})},hide:function(){this.picker.hide(),a(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||a(document).off("mousedown",this.hide),this.set(),this.element.trigger({type:"hide",date:this.date})},remove:function(){this.picker.remove()},set:function(){this.element.trigger({type:"changeDate",date:this.date?this.date.getTime():null});return},setValue:function(a){a?typeof a=="string"?this.date=c.parseDate(a):this.date=new Date(a*1e3):this.date=null,this.set(),a&&this.date?this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):this.viewDate=null,this.fill()},place:function(){var b=this.component?this.component.offset():this.element.offset();this.picker.css({top:b.top+this.height,left:b.left});var c=a(window).height(),d=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,e=this.picker[0].offsetTop+this.picker[0].offsetHeight;e-d>c&&this.picker.css({top:b.top-this.picker[0].offsetHeight,left:b.left})},update:function(a){this.date=c.parseDate(typeof a=="string"?a:this.isInput?this.element.prop("value"):this.element.data("date")),this.date?this.viewDate=new Date(this.date.getFullYear(),this.date.getMonth(),1,0,0,0,0):this.viewDate=new Date,this.fill()},fillDow:function(){var a=this.weekStart,b="<tr>";while(a<this.weekStart+7)b+='<th class="dow">'+c.dates.daysMin[a++%7]+"</th>";b+="</tr>",this.picker.find(".datepicker-days thead").append(b)},fillMonths:function(){var a="",b=0;while(b<12)a+='<span class="month">'+c.dates.monthsShort[b++]+"</span>";this.picker.find(".datepicker-months td").append(a)},fill:function(){var a=new Date(this.viewDate),b=a.getFullYear(),d=a.getMonth(),e=null;this.date&&(e=(new Date(this.date.getFullYear(),this.date.getMonth(),this.date.getDate())).valueOf()),this.picker.find(".datepicker-days th:eq(1)").text(c.dates.months[d]+" "+b);var f=new Date(b,d-1,28,0,0,0,0),g=c.getDaysInMonth(f.getFullYear(),f.getMonth());f.setDate(g),f.setDate(g-(f.getDay()-this.weekStart+7)%7);var h=new Date(f);h.setDate(h.getDate()+42),h=h.valueOf();var i=[],j;while(f.valueOf()<h)f.getDay()===this.weekStart&&i.push("<tr>"),j="",f.getMonth()<d?j+=" old":f.getMonth()>d&&(j+=" new"),f.valueOf()===e&&(j+=" active"),i.push('<td class="day'+j+'">'+f.getDate()+"</td>"),f.getDay()===this.weekEnd&&i.push("</tr>"),f.setDate(f.getDate()+1);this.picker.find(".datepicker-days tbody").empty().append(i.join(""));var k=this.date?this.date.getFullYear():null,l=this.picker.find(".datepicker-months").find("th:eq(1)").text(b).end().find("span").removeClass("active");if(k===b){var m=this.date?this.date.getMonth():null;m&&l.eq(m).addClass("active")}i="",b=parseInt(b/10,10)*10;var n=this.picker.find(".datepicker-years").find("th:eq(1)").text(b+"-"+(b+9)).end().find("td");b-=1;for(var o=-1;o<11;o++)i+='<span class="year'+(o===-1||o===10?" old":"")+(k===b?" active":"")+'">'+b+"</span>",b+=1;n.html(i)},click:function(b){b.stopPropagation(),b.preventDefault();var d=a(b.target).closest("span, td, th");if(d.length===1)switch(d[0].nodeName.toLowerCase()){case"th":switch(d[0].className){case"switch":this.showMode(1);break;case"prev":case"next":this.viewDate["set"+c.modes[this.viewMode].navFnc].call(this.viewDate,this.viewDate["get"+c.modes[this.viewMode].navFnc].call(this.viewDate)+c.modes[this.viewMode].navStep*(d[0].className==="prev"?-1:1)),this.fill(),this.set()}break;case"span":if(d.is(".month")){var e=d.parent().find("span").index(d);this.viewDate.setMonth(e)}else{var f=parseInt(d.text(),10)||0;this.viewDate.setFullYear(f)}this.viewMode!==0&&(this.date=new Date(this.viewDate)),this.showMode(-1),this.fill(),this.set();break;case"td":if(d.is(".day")){var g=parseInt(d.text(),10)||1,e=this.viewDate.getMonth();d.is(".old")?e-=1:d.is(".new")&&(e+=1);var f=this.viewDate.getFullYear();this.date=new Date(f,e,g,0,0,0,0),this.viewDate=new Date(f,e,Math.min(28,g),0,0,0,0),this.fill(),this.set(),this.element.trigger({type:"changeDate",date:this.date,viewMode:c.modes[this.viewMode].clsName})}}},mousedown:function(a){a.stopPropagation(),a.preventDefault()},showMode:function(a){a&&(this.viewMode=Math.max(this.minViewMode,Math.min(2,this.viewMode+a))),this.picker.find(">div").hide().filter(".datepicker-"+c.modes[this.viewMode].clsName).show()}},a.fn.datepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("datepicker"),g=typeof c=="object"&&c;f||e.data("datepicker",f=new b(this,a.extend({},a.fn.datepicker.defaults,g))),typeof c=="string"&&f[c](d)})},a.fn.datepicker.defaults={},a.fn.datepicker.Constructor=b;var c={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],dates:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0},getDaysInMonth:function(a,b){return[31,c.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},parseDate:function(a){if(!a)return null;var b=new Date,c=parseDateString(a);return c?(b.setTime(c*1e3),b):null},headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'};c.template='<div class="datepicker dropdown-menu"><div class="datepicker-days"><table class=" table-condensed">'+c.headTemplate+"<tbody></tbody>"+"</table>"+"</div>"+'<div class="datepicker-months">'+'<table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table>"+"</div>"+'<div class="datepicker-years">'+'<table class="table-condensed">'+c.headTemplate+c.contTemplate+"</table>"+"</div>"+"</div>"}(window.jQuery),angular.module("ADE").filter("validDate",["$filter",function(a){return function(b,c){var d="";return b?angular.isUndefined(b)?d:(angular.isString(b)&&(b=parseDateString(b)),angular.isNumber(b)&&(d=a("date")(b*1e3,c)),d):d}}]),angular.module("ADE").directive("adeCalpop",["$filter",function(a){return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){var f="mm/dd/yyy";c.bind("keyup",function(a){a.keyCode==13?(c.datepicker("hide"),c.blur()):a.keyCode==27&&c.datepicker("hide")});var g=function(d){var g="";d.date&&(g=a("date")(d.date,f)),c.context.value=g,e!==undefined&&e!==null&&e.$setViewValue(g),b.$$phase||b.$digest()};return e!==undefined&&e!==null&&(e.$render=function(){return e.$viewValue?(c.datepicker().data().datepicker.date=e.$viewValue,c.datepicker("setValue",e.$viewValue),c.datepicker("update")):e.$viewValue===null&&(c.datepicker("setValue",null),c.datepicker("update")),e.$viewValue}),d.$observe("adeCalpop",function(a){var b={};return angular.isObject(a)&&(b=a),typeof a=="string"&&a.length>0&&(b=angular.fromJson(a)),b.format&&(f=b.format),c.datepicker(b).on("changeDate",g)})}}}]),angular.module("ADE").directive("adeDate",["ADE","$compile",function(a,b){return{require:"?ngModel",restrict:"A",link:function(c,d,e,f){var g={},h=!1,i=null,j=null,k=null,l=0;f!==null&&(f.$render=function(){k=j=f.$modelValue;if(j===undefined||j===null)j=0;return f.$viewValue});var m=function(b){k=j,l=b,b!=3&&(j=parseDateString(i.val()),f.$setViewValue(j)),d.show(),i.datepicker("remove"),i.remove(),h=!1,a.done(g,k,j,l),c.$digest()};return d.bind("click",function(){if(h)return;h=!0,l=0,j=j||0,angular.isNumber(j)||(j=parseDateString(j)),a.begin(g),d.hide();var e="";g.format=="yyyy"&&(e=',"viewMode":2,"minViewMode":2');var f='<input ade-calpop=\'{"format":"'+g.format+'"'+e+'}\' ng-model="adePickDate" ng-init="adePickDate='+j+'" type="text" class="'+g.className+'" />';b(f)(c).insertAfter(d),i=d.next("input"),i.focus(),setTimeout(function(){i.focus()}),a.setupBlur(i,m),a.setupKeys(i,m),c.$parent&&c.$parent.$localApply?c.$parent.$localApply():c.$apply()}),e.$observe("adeDate",function(b){return g=a.parseSettings(b,{className:"input-medium",format:"MMM d, yyyy"}),d})}}}]),angular.module("ADE").filter("decimal",["$filter",function(a){return function(b,c){var d="",c=c||2;return angular.isString(b)&&(b=parseFloat(b)),angular.isUndefined(b)||!angular.isNumber(b)?d:(d=a("number")(b,c),d)}}]),angular.module("ADE").filter("email",["$filter",function(a){return function(b){return b?angular.isString(b)?a("linky")(b):b+"":""}}]),angular.module("ADE").directive("adeIcon",["ADE","$compile",function(a,b){var c=a.icons.length,d="";c>0&&(d='<a class="icon-_clear">clear</a>');for(var e=0;e<c;e++)d+='<span class="icon-'+a.icons[e]+'"></span>';return{require:"?ngModel",restrict:"A",link:function(c,e,f,g){var h={},i="",j="",k=!1,l=0,m=null,n=null;g!==null&&(g.$render=function(){j=i=g.$modelValue;if(i===undefined||i===null)i="";return g.$viewValue});var o=function(b,d){window.clearTimeout(n),j=i,i=d||j,l=b,l!==3&&g.$setViewValue(i),k=!1,c.ADE_hidePopup(),a.done(h,j,i,l),c.$digest()};return e.bind("click",function(f){f.preventDefault(),f.stopPropagation(),a.begin(h);var g=angular.element("."+a.popupClass),i=angular.element(f.target),j=i.attr("class"),l,p,q;if(angular.isDefined(j)&&j.match("icon")&&j.match("icon").length&&i.parent()[0]==e[0]&&(!g||!g.length)){k=!0,l=e.offset(),p=l.left-7,q=l.top+e[0].offsetHeight,b('<div class="'+a.popupClass+' dropdown-menu open" style="left:'+p+"px;top:"+q+'px"><h4>Select an Icon</h4>'+d+'<div class="ade-hidden"><input id="invisicon" type="text" /></div></div>')(c).insertAfter(e),m=angular.element("#invisicon");var r=e.next(".ade-popup"),s=r.find(".icon-_clear"),t=r.find("span");s.bind("click",function(){o(0,"_clear")}),angular.forEach(t,function(a){var b=angular.element(a);b.bind("click",function(){window.clearTimeout(n);var a=b.attr("class");if(a.match("icon")){var c=a.substr(5);o(0,c)}})}),m.focus(),a.setupKeys(m,o),m.bind("blur",function(a){n=window.setTimeout(function(){o(0)},500)})}}),f.$observe("adeIcon",function(b){return h=a.parseSettings(b,{}),e})}}}]),angular.module("ADE").filter("icon",["ADE",function(a){return function(b,c){b||(b="_clear");var d=!1,e=a.icons.length;for(var f=0;f<e;f++)if(b===a.icons[f]){d=!0;break}return d||(b="_clear"),'<span class="ade-icon icon-'+b+'">'}}]),angular.module("ADE").filter("integer",["$filter",function(a){return function(b){var c="";return angular.isString(b)&&(b=parseFloat(b)),angular.isUndefined(b)||!angular.isNumber(b)?c:(c=a("number")(b,0),c)}}]),angular.module("ADE").directive("adeLength",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",link:function(d,e,f,g){var h={},i=!1,j=null,k="",l="",m=0;g!==null&&(g.$render=function(){l=k=g.$modelValue;if(k===undefined||k===null)k="";return g.$viewValue});var n=function(b){l=k,m=b,b!=3&&(k=j.val(),g.$setViewValue(k)),e.show(),j.remove(),i=!1,a.done(h,l,k,m),d.$digest()};return e.bind("click",function(){if(i)return;i=!0,m=0,k=c("length")(k),a.begin(h),e.hide(),b('<input type="text" class="'+h.className+'" value="'+k+'" />')(d).insertAfter(e),j=e.next("input"),j.focus(),a.setupBlur(j,n),a.setupKeys(j,n)}),f.$observe("adeLength",function(b){return h=a.parseSettings(b,{className:"input-medium"}),e})}}}]),angular.module("ADE").filter("length",function(){function a(a){var b="",c=0,d=0;return a<60&&a>0?b=a===1?a+"min":a+"mins":a>=60?(d=a%60,c=Math.round((a-d)/60),b=c===1?c+"hr":c+"hrs",d>0&&(b+=d===1?" "+d+"min":" "+d+"mins")):b="",b}function b(a){var b=parseFloat(a,10);return a.indexOf("h")!==-1&&(b*=60),Math.round(b)}function c(a){var b=a.split(" ");return parseFloat(b[0],10)*60+parseFloat(b[1],10)}return function(d){if(!d)return"";var e="";if(!isNaN(d))return a(d);if(!angular.isString(d))return"";var f=d.split(" ");switch(f.length){case 1:e=b(d),e=a(e);break;case 2:e=c(d),e=a(e);break;default:e=""}return e}}),angular.module("ADE").directive("adeList",["ADE","$compile",function(a,b){return{require:"?ngModel",restrict:"A",link:function(c,d,e,f){var g={},h=!1,i=null,j="",k="",l=0;f&&(f.$render=function(){k=j=f.$modelValue;if(j===undefined||j===null)j="";return f.$viewValue});var m=function(b){k=j,l=b;if(b!=3){j=i.data().select2.data();if(angular.isArray(j))if(j.length>0){var e=[];angular.forEach(j,function(a,b){e.push(a.text)}),j=e}else j="";else angular.isObject(j)&&j.text?j=j.text:j=j?j.text:"";f.$setViewValue(j)}b!==0&&(d.show(),i.select2("destroy"),i.remove()),h=!1,a.done(g,k,j,l),c.$$phase||c.$digest()};return $(document).bind("keydown",function(a){$(document).find("div.select2-drop-active").each(function(){if(a.keyCode==27){a.preventDefault(),a.stopPropagation();var b=$(document).find(".select2-container-active"),c=b.next();b.remove(),c.remove(),d.show(),h=!1}})}),d.bind("click",function(){if(h)return;h=!0,l=0,a.begin(g),d.hide();var e="",f="";g.multiple?e='multiple="multiple"':f=",placeholder:'List...'";var k="";g.query&&(k=",query:"+g.query);var n="";g.selection&&(n=",initSelection:"+g.selection);var o="";g.listId&&(o=",listId:'"+g.listId+"'");var p='<input class="ade-list-input" type="hidden" ui-select2={width:\'resolve\',allowClear:true,openOnEnter:false,searchClear:true,closeOnRemove:false,closeOnSelect:false,allowAddNewValues:true'+k+o+n+f+"} "+e+" />";b(p)(c).insertAfter(d),i=d.next("input"),angular.isString(j)&&(j=j.split(",")),i.val(j),setTimeout(function(){c.selection(i,function(a){i.select2("data",a),i.select2("open")},g.listId)}),i.on("change",function(a){a[0]==="singleRemove"?m():a[0]==="bodyClick"?m():g.multiple||m()})}),e.$observe("adeList",function(b){return g=a.parseSettings(b,{multiple:!1}),d})}}}]),angular.module("ADE").directive("uiSelect2",["$http",function(a){var b={};return{require:"?ngModel",compile:function(a,c){var d,e,f,g=a.is("select"),h=c.multiple!==undefined;return function(a,c,e,f){var i=angular.extend({},b,a.$eval(e.uiSelect2));h&&(i.multiple=!0);if(f){f.$render=function(){h&&!f.$modelValue?c.select2("data",[]):angular.isObject(f.$modelValue)?c.select2("data",f.$modelValue):c.select2("val",f.$modelValue)},d&&a.$watch(d,function(a,b,d){if(!a)return;setTimeout(function(){c.select2("val",f.$viewValue),c.trigger("change")})});if(!g){c.bind("change",function(){f.$setViewValue(c.select2("data")),a.$digest()});if(i.initSelection){var j=i.initSelection;i.initSelection=function(a,b){j(a,function(a){f.$setViewValue(a),b(a)},i.listId)}}}}e.$observe("disabled",function(a){c.select2(a&&"disable"||"enable")}),e.ngMultiple&&a.$watch(e.ngMultiple,function(a){c.select2(i)}),c.val(a.$eval(e.ngModel)),setTimeout(function(){c.select2(i)})}}}}]),angular.module("ADE").filter("list",["$filter",function(a){return function(a,b){if(!a)return"";if(angular.isString(a))return a;if(!angular.isArray(a))return"";if(b)return a[0];var c="";return $.each(a,function(a,b){c&&(c+=", "),c+=b}),c}}]),function(a){typeof a.fn.each2=="undefined"&&a.fn.extend({each2:function(b){var c=a([0]),d=-1,e=this.length;while(++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1);return this}})}(jQuery),function(a,b){function i(a,b){var c=0,d=b.length,e;if(typeof a=="undefined")return-1;if(a.constructor===String){for(;c<d;c+=1)if(a.localeCompare(b[c])===0)return c}else for(;c<d;c+=1){e=b[c];if(e.constructor===String){if(e.localeCompare(a)===0)return c}else if(e===a)return c}return-1}function j(a,c){return a===c?!0:a===b||c===b?!1:a===null||c===null?!1:a.constructor===String?a.localeCompare(c)===0:c.constructor===String?c.localeCompare(a)===0:!1}function k(b,c){var d,e,f;if(b===null||b.length<1)return[];d=b.split(c);for(e=0,f=d.length;e<f;e+=1)d[e]=a.trim(d[e]);return d}function l(a){return a.outerWidth()-a.width()}function m(c){var d="keyup-change-value";c.bind("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.bind("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function n(c){c.bind("mousemove",function(c){var d=a.data(document,"select2-lastpos");(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function o(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function p(a){var b=!1,c;return function(){return b===!1&&(c=a(),b=!0),c}}function q(a,b){var c=o(a,function(a){b.trigger("scroll-debounced",a)});b.bind("scroll",function(a){i(a.target,b.get())>=0&&c(a)})}function r(a){a.preventDefault(),a.stopPropagation()}function s(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);h=a("<div></div>").css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),a("body").append(h)}return h.text(b.val()),h.width()}function t(a,b,c){var d=a.toUpperCase().indexOf(b.toUpperCase()),e=b.length;if(d<0){c.push(a);return}c.push(a.substring(0,d)),c.push("<span class='select2-match'>"),c.push(a.substring(d,d+e)),c.push("</span>"),c.push(a.substring(d+e,a.length))}function u(b){var c,d=0,e=null,f=b.quietMillis||100;return function(g){window.clearTimeout(c),c=window.setTimeout(function(){d+=1;var c=d,f=b.data,h=b.transport||a.ajax,i=b.traditional||!1,j=b.type||"GET";f=f.call(this,g.term,g.page,g.context),null!==e&&e.abort(),e=h.call(null,{url:b.url,dataType:b.dataType,data:f,type:j,traditional:i,success:function(a){if(c<d)return;var e=b.results(a,g.page);g.callback(e)}})},f)}}function v(b){var c=b,d,e=function(a){return""+a.text};return a.isArray(c)||(e=c.text,a.isFunction(e)||(d=c.text,e=function(a){return a[d]}),c=c.results),function(b){var d=b.term,f={results:[]},g;if(d===""){b.callback({results:c});return}g=function(c,f){var h,i;c=c[0];if(c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),h.children.length&&f.push(h)}else b.matcher(d,e(c))&&f.push(c)},a(c).each2(function(a,b){g(b,f.results)}),b.callback(f)}}function w(c){return a.isFunction(c)?c:function(d){var e=d.term,f={results:[]};a(c).each(function(){var a=this.text!==b,c=a?this.text:this;(e===""||d.matcher(e,c))&&f.results.push(a?this:{id:this,text:this})}),d.callback(f)}}function x(b,c){if(a.isFunction(b))return!0;if(!b)return!1;throw new Error("formatterName must be a function or a falsy value")}function y(b){return a.isFunction(b)?b():b}function z(b){var c=0;return a.each(b,function(a,b){b.children?c+=z(b.children):c++}),c}function A(a,c,d,e){var f=a,g=!1,h,i,k,l,m;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){i=-1;for(k=0,l=e.tokenSeparators.length;k<l;k++){m=e.tokenSeparators[k],i=a.indexOf(m);if(i>=0)break}if(i<0)break;h=a.substring(0,i),a=a.substring(i+m.length);if(h.length>0){h=e.createSearchChoice(h,c);if(h!==b&&h!==null&&e.id(h)!==b&&e.id(h)!==null){g=!1;for(k=0,l=c.length;k<l;k++)if(j(e.id(h),e.id(c[k]))){g=!0;break}g||d(h)}}}if(f.localeCompare(a)!=0)return a}function B(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}"use strict";if(window.Select2!==b)return;var c,d,e,f,g,h;c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&a<=123}},g=function(){var a=1;return function(){return a++}}(),a(document).delegate("body","mousemove",function(b){a.data(document,"select2-lastpos",{x:b.pageX,y:b.pageY})}),a(document).ready(function(){a(document).delegate("body","mousedown touchend",function(c){var d=a(c.target).closest("div.select2-container").get(0),e;if(d)a(document).find("div.select2-container-active").each(function(){this!==d&&a(this).data("select2").blur()});else{d=a(c.target).closest("div.select2-drop").get(0),a(document).find("div.select2-drop-active").each(function(){this!==d&&a(this).data("select2").blur()});var f=a(".select2-container");f.length&&a.each(f,function(){a(this).next().hasClass("ade-list-input")&&c.target!==a(this)&&a(this).find(".select2-drop").not(":visible")&&a(this).data("select2").triggerChange(["bodyClick"])})}d=a(c.target),e=d.attr("for"),"LABEL"===c.target.tagName&&e&&e.length>0&&(d=a("#"+e),d=d.data("select2"),d!==b&&(d.focus(),c.preventDefault()))})}),d=B(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&c.element.data("select2")!==null&&this.destroy(),this.enabled=!0,this.container=this.createContainer(),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=p(function(){return c.element.closest("body")}),c.element.attr("class")!==b&&this.container.addClass(c.element.attr("class").replace(/validate\[[\S ]+] ?/,"")),this.container.css(y(c.containerCss)),this.container.addClass(y(c.containerCssClass)),this.opts.element.data("select2",this).hide().before(this.container),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),this.dropdown.addClass(y(c.dropdownCssClass)),this.dropdown.data("select2",this),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),e.attr("tabIndex",this.opts.element.attr("tabIndex")),this.resultsPage=0,this.context=null,this.initContainer(),this.initContainerWidth(),n(this.results),this.dropdown.delegate(f,"mousemove-filtered",this.bind(this.highlightUnderEvent)),q(80,this.results),this.dropdown.delegate(f,"scroll-debounced",this.bind(this.loadMoreIfNeeded)),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop(),g;e>0&&f-e<=0?(d.scrollTop(0),r(a)):e<0&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),r(a))}),m(e),e.bind("keyup-change",this.bind(this.updateResults)),e.bind("focus",function(){e.addClass("select2-focused"),e.val()===" "&&e.val("")}),e.bind("blur",function(){e.removeClass("select2-focused")}),this.dropdown.delegate(f,"mouseup",this.bind(function(b){a(b.target).closest(".select2-result-selectable:not(.select2-disabled)").length>0?(this.highlightUnderEvent(b),this.selectHighlighted(b)):this.focusSearch(),r(b)})),this.dropdown.bind("click mouseup mousedown",function(a){a.stopPropagation()}),a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),(c.element.is(":disabled")||c.element.is("[readonly='readonly']"))&&this.disable()},destroy:function(){var a=this.opts.element.data("select2");a!==b&&(a.container.remove(),a.dropdown.remove(),a.opts.element.removeData("select2").unbind(".select2").show())},prepareOpts:function(c){var d,e,f,g;d=c.element,d.get(0).tagName.toLowerCase()==="select"&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var g,h,i,j,k=this.opts.id,l=this;g=function(d,e,h){var i,j,m,n,o,p,q,r,s;for(i=0,j=d.length;i<j;i+=1)m=d[i],n=k(m)!==b,o=m.children&&m.children.length>0,p=a("<li></li>"),p.addClass("select2-results-dept-"+h),p.addClass("select2-result"),p.addClass(n?"select2-result-selectable":"select2-result-unselectable"),o&&p.addClass("select2-result-with-children"),p.addClass(l.opts.formatResultCssClass(m)),q=a("<div></div>"),q.addClass("select2-result-label"),s=c.formatResult(m,q,f),s!==b&&q.html(l.opts.escapeMarkup(s)),p.append(q),o&&(r=a("<ul></ul>"),r.addClass("select2-result-sub"),g(m.children,r,h+1),p.append(r)),p.data("select2-data",m),e.append(p)},g(e,d,0)}},a.fn.select2.defaults,c),typeof c.id!="function"&&(f=c.id,c.id=function(a){return a[f]}),e?(c.query=this.bind(function(c){var e={results:[],more:!1},f=c.term,g,h,i;i=function(a,b){var d;a.is("option")?c.matcher(f,a.text(),a)&&b.push({id:a.attr("value"),text:a.text(),element:a.get(),css:a.attr("class")}):a.is("optgroup")&&(d={text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")},a.children().each2(function(a,b){i(b,d.children)}),d.children.length>0&&b.push(d))},g=d.children(),this.getPlaceholder()!==b&&g.length>0&&(h=g[0],a(h).text()===""&&(g=g.not(h))),g.each2(function(a,b){i(b,e.results)}),c.callback(e)}),c.id=function(a){return a.id},c.formatResultCssClass=function(a){return a.css}):"query"in c||("ajax"in c?(g=c.element.data("ajax-url"),g&&g.length>0&&(c.ajax.url=g),c.query=u(c.ajax)):"data"in c?c.query=v(c.data):"tags"in c&&(c.query=w(c.tags),c.createSearchChoice=function(a){return{id:a,text:a}},c.initSelection=function(b,d){var e=[];a(k(b.val(),c.separator)).each(function(){var b=this,d=this,f=c.tags;a.isFunction(f)&&(f=f()),a(f).each(function(){if(j(this.id,b))return d=this.text,!1}),e.push({id:b,text:d})}),d(e)}));if(typeof c.query!="function")throw"query function not defined for Select2 "+c.element.attr("id");return c},monitorSource:function(){this.opts.element.bind("change.select2",this.bind(function(a){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()}))},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},enable:function(){if(this.enabled)return;this.enabled=!0,this.container.removeClass("select2-container-disabled")},disable:function(){if(!this.enabled)return;this.close(),this.enabled=!1,this.container.addClass("select2-container-disabled")},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var b=this.container.offset(),c=this.container.outerHeight(),d=this.container.outerWidth(),e=this.dropdown.outerHeight(),f=a(window).scrollTop()+document.documentElement.clientHeight,g=b.top+c,h=b.left,i=g+e<=f,j=b.top-e>=this.body().scrollTop(),k=this.dropdown.hasClass("select2-drop-above"),l,m,n;this.body().css("position")!=="static"&&(l=this.body().offset(),g-=l.top,h-=l.left),k?(m=!0,!j&&i&&(m=!1)):(m=!1,!i&&j&&(m=!0)),m?(g=b.top-e,this.container.addClass("select2-drop-above"),this.dropdown.addClass("select2-drop-above")):(this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")),n=a.extend({top:g,left:h,width:d},y(this.opts.dropdownCss)),this.dropdown.css(n)},shouldOpen:function(){var b;return this.opened()?!1:(b=a.Event("open"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(window.setTimeout(this.bind(this.opening),1),!0):!1},opening:function(){var b=this.containerId,c=this.containerSelector,d="scroll."+b,e="resize."+b;this.container.parents().each(function(){a(this).bind(d,function(){var b=a(c);b.length==0&&a(this).unbind(d),b.select2("close")})}),a(window).bind(e,function(){var b=a(c);b.length==0&&a(window).unbind(e),b.select2("close")}),this.clearDropdownAlignmentPreference(),this.search.val()===" "&&this.search.val(""),this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.updateResults(!0),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active"),this.ensureHighlightVisible(),this.focusSearch()},close:function(){if(!this.opened())return;var b=this;this.container.parents().each(function(){a(this).unbind("scroll."+b.containerId)}),a(window).unbind("resize."+this.containerId),this.clearDropdownAlignmentPreference(),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),this.clearSearch(),this.opts.element.trigger(a.Event("close"))},clearSearch:function(){},ensureHighlightVisible:function(){var b=this.results,c,d,e,f,g,h,i;d=this.highlight();if(d<0)return;if(d==0){b.scrollTop(0);return}c=b.find(".select2-result-selectable"),e=a(c[d]),f=e.offset().top+e.outerHeight(),d===c.length-1&&(i=b.find("li.select2-more-results"),i.length>0&&(f=i.offset().top+i.outerHeight())),g=b.offset().top+b.outerHeight(),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=e.offset().top-b.offset().top,h<0&&b.scrollTop(b.scrollTop()+h)},moveHighlight:function(b){var c=this.results.find(".select2-result-selectable"),d=this.highlight();while(d>-1&&d<c.length){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")){this.highlight(d);break}}},highlight:function(b){var c=this.results.find(".select2-result-selectable").not(".select2-disabled");if(arguments.length===0)return i(c.filter(".select2-highlighted")[0],c.get());b>=c.length&&(b=c.length-1),b<0&&(b=0),c.removeClass("select2-highlighted"),a(c[b]).addClass("select2-highlighted"),this.ensureHighlightVisible()},countSelectableResults:function(){return this.results.find(".select2-result-selectable").not(".select2-disabled").length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.results.find(".select2-result-selectable");this.highlight(d.index(c))}else c.length==0&&this.results.find(".select2-highlighted").removeClass("select2-highlighted")},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=-1,e=this.resultsPage+1,f=this,g=this.search.val(),h=this.context;if(b.length===0)return;c=b.offset().top-a.offset().top-a.height(),c<=0&&(b.addClass("select2-active"),this.opts.query({term:g,page:e,context:h,matcher:this.opts.matcher,callback:this.bind(function(c){if(!f.opened())return;f.opts.populateResults.call(this,a,c.results,{term:g,page:e,context:h}),c.more===!0?(b.detach().appendTo(a).text(f.opts.formatLoadMore(e+1)),window.setTimeout(function(){f.loadMoreIfNeeded()},10)):b.remove(),f.positionDropdown(),f.resultsPage=e})}))},tokenize:function(){},updateResults:function(c){function k(){e.scrollTop(0),d.removeClass("select2-active"),h.positionDropdown()}function l(a){e.html(h.opts.escapeMarkup(a)),k()}var d=this.search,e=this.results,f=this.opts,g,h=this,i;if(c!==!0&&(this.showSearchInput===!1||!this.opened()))return;d.addClass("select2-active");if(f.maximumSelectionSize>=1){g=this.data();if(a.isArray(g)&&g.length>=f.maximumSelectionSize&&x(f.formatSelectionTooBig,"formatSelectionTooBig")){l("<li class='select2-selection-limit'>"+f.formatSelectionTooBig(f.maximumSelectionSize)+"</li>");return}}if(d.val().length<f.minimumInputLength&&x(f.formatInputTooShort,"formatInputTooShort")){l("<li class='select2-no-results'>"+f.formatInputTooShort(d.val(),f.minimumInputLength)+"</li>");return}l("<li class='select2-searching'>"+f.formatSearching()+"</li>"),i=this.tokenize(),i!=b&&i!=null&&d.val(i),this.resultsPage=1,f.query({term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(!this.opened())return;this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&d.val()!==""&&(i=this.opts.createSearchChoice.call(null,d.val(),g.results),i!==b&&i!==null&&h.id(i)!==b&&h.id(i)!==null&&a(g.results).filter(function(){return j(h.id(this),h.id(i))}).length===0&&g.results.unshift(i));if(g.results.length===0&&x(f.formatNoMatches,"formatNoMatches")){l("<li class='select2-no-results'>"+f.formatNoMatches(d.val())+"</li>");return}e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&x(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+h.opts.escapeMarkup(f.formatLoadMore(this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),k()})})},cancel:function(){this.close()},blur:function(){this.close(),this.container.removeClass("select2-container-active"),this.dropdown.removeClass("select2-drop-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.search.show(),this.search.focus(),window.setTimeout(this.bind(function(){this.search.show(),this.search.focus(),this.search.val(this.search.val())}),10)},selectHighlighted:function(){var a=this.highlight(),b=this.results.find(".select2-highlighted").not(".select2-disabled"),c=b.closest(".select2-result-selectable").data("select2-data");c&&(b.addClass("select2-disabled"),this.highlight(a),this.onSelect(c))},getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},initContainerWidth:function(){function c(){var c,d,e,f,g;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){c=this.opts.element.attr("style");if(c!==b){d=c.split(";");for(f=0,g=d.length;f<g;f+=1){e=d[f].replace(/\s/g,"").match(/width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/);if(e!==null&&e.length>=1)return e[1]}}return this.opts.width==="resolve"?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:this.opts.element.outerWidth()===0?"auto":this.opts.element.outerWidth()+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);d!==null&&this.container.attr("style","width: "+d)}}),e=B(d,{createContainer:function(){var b=a("<div></div>",{"class":"select2-container"}).html(["    <a class='select2-choice'>","   <span></span><abbr class='select2-search-choice-close' style='display:none;'></abbr>","   <div><b></b></div>","</a>","    <div class='select2-drop select2-offscreen'>","   <div class='select2-search'>","       <input type='text' autocomplete='off' class='select2-input'/>","   </div>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},opening:function(){this.search.show(),this.parent.opening.apply(this,arguments),this.dropdown.removeClass("select2-offscreen")},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments),this.dropdown.removeAttr("style").addClass("select2-offscreen").insertAfter(this.selection).show()},focus:function(){this.close(),this.selection.focus()},isFocused:function(){return this.selection[0]===document.activeElement},cancel:function(){this.parent.cancel.apply(this,arguments),this.selection.focus()},initContainer:function(){var a,b=this.container,d=this.dropdown,e=!1;this.selection=a=b.find(".select2-choice"),this.search.bind("keydown",this.bind(function(a){if(!this.enabled)return;if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN){r(a);return}if(this.opened())switch(a.which){case c.UP:case c.DOWN:this.moveHighlight(a.which===c.UP?-1:1),r(a);return;case c.TAB:case c.ENTER:this.selectHighlighted(),r(a);return;case c.ESC:this.cancel(a);return}else{if(a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.ESC)return;if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return;this.open();if(a.which===c.ENTER)return}})),this.search.bind("focus",this.bind(function(){this.selection.attr("tabIndex","-1")})),this.search.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.selection.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),a.bind("mousedown",this.bind(function(a){e=!0,this.opened()?(this.close(),this.selection.focus()):this.enabled&&this.open(),e=!1})),d.bind("mousedown",this.bind(function(){this.search.focus()})),a.bind("focus",this.bind(function(){this.container.addClass("select2-container-active"),this.search.attr("tabIndex","-1")})),a.bind("blur",this.bind(function(){this.opened()||this.container.removeClass("select2-container-active"),window.setTimeout(this.bind(function(){this.search.attr("tabIndex",this.opts.element.attr("tabIndex"))}),10)})),a.bind("keydown",this.bind(function(a){if(!this.enabled)return;if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN){r(a);return}if(a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.ESC)return;if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return;if(a.which==c.DELETE||a.which==c.BACKSPACE){this.opts.allowClear&&this.clear(),r(a);return}this.open();if(a.which===c.ENTER){r(a);return}if(a.which<48){r(a);return}var b=String.fromCharCode(a.which).toLowerCase();a.shiftKey&&(b=b.toUpperCase()),this.search.focus(),this.search.val(b),r(a)})),a.delegate("abbr","mousedown",this.bind(function(a){if(!this.enabled)return;this.clear(),r(a),this.opts.closeOnRemove&&this.close(),this.triggerChange(["singleRemove"]),this.selection.focus()})),this.setPlaceholder(),this.search.bind("focus",this.bind(function(){this.container.addClass("select2-container-active")}))},clear:function(){this.opts.element.val(""),this.selection.find("span").empty(),this.selection.removeData("select2-data"),this.setPlaceholder()},initSelection:function(){var a;if(this.opts.element.val()==="")this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&a!==null&&(c.updateSelection(a),c.close(),c.setPlaceholder())},this.opts.listId)}},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments);return b.element.get(0).tagName.toLowerCase()==="select"&&(b.initSelection=function(b,c){var d=b.find(":selected");a.isFunction(c)&&c({id:d.attr("value"),text:d.text()})}),b},setPlaceholder:function(){var a=this.getPlaceholder();if(this.opts.element.val()===""&&a!==b){if(this.select&&this.select.find("option:first").text()!=="")return;this.selection.find("span").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.selection.find("abbr").hide()}},postprocessResults:function(b,c){var d=0,e=this,f=!0;this.results.find(".select2-result-selectable").each2(function(a,b){if(j(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1}),this.highlight(d),c===!0&&(f=this.showSearchInput=z(b.results)>=this.opts.minimumResultsForSearch,this.dropdown.find(".select2-search")[f?"removeClass":"addClass"]("select2-search-hidden"),a(this.dropdown,this.container)[f?"addClass":"removeClass"]("select2-with-searchbox"))},onSelect:function(a){var b=this.opts.element.val();this.opts.element.val(this.id(a)),this.updateSelection(a),this.close(),this.selection.focus(),j(b,this.id(a))||this.triggerChange()},updateSelection:function(a){var c=this.selection.find("span"),d;this.selection.data("select2-data",a),c.empty(),d=this.opts.formatSelection(a,c),d!==b&&c.append(this.opts.escapeMarkup(d)),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.selection.find("abbr").show()},val:function(){var a,c=null,d=this;if(arguments.length===0)return this.opts.element.val();a=arguments[0];if(this.select)this.select.val(a).find(":selected").each2(function(a,b){return c={id:b.attr("value"),text:b.text()},!1}),this.updateSelection(c),this.setPlaceholder();else{if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");if(!a){this.clear();return}this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(a?d.id(a):""),d.updateSelection(a),d.setPlaceholder()})}},clearSearch:function(){this.search.val("")},data:function(a){var c;if(arguments.length===0)return c=this.selection.data("select2-data"),c==b&&(c=null),c;!a||a===""?this.clear():(this.opts.element.val(a?this.id(a):""),this.updateSelection(a))}}),f=B(d,{createContainer:function(){var b=a("<div></div>",{"class":"select2-container select2-container-multi"}).html(["    <ul class='select2-choices'>","  <li class='select2-search-field'>","    <input type='text' autocomplete='off' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi' style='display:none;'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments);return b.element.get(0).tagName.toLowerCase()==="select"&&(b.initSelection=function(b,c){var d=[];b.find(":selected").each2(function(a,b){d.push({id:b.attr("value"),text:b.text()})}),a.isFunction(c)&&c(d)}),b},initContainer:function(){var b=".select2-choices",d;this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b),this.search.bind("keydown",this.bind(function(a){if(!this.enabled)return;if(a.which===c.BACKSPACE&&this.search.val()===""){this.close();var b,e=d.find(".select2-search-choice-focus");if(e.length>0){this.unselect(e.first()),this.search.width(10),r(a);return}b=d.find(".select2-search-choice"),b.length>0&&b.last().addClass("select2-search-choice-focus")}else d.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");if(this.opened())switch(a.which){case c.UP:case c.DOWN:this.moveHighlight(a.which===c.UP?-1:1),r(a);return;case c.ENTER:case c.TAB:this.selectHighlighted(),r(a);return;case c.ESC:this.cancel(a);return}if(a.which===c.TAB||c.isControl(a)||c.isFunctionKey(a)||a.which===c.BACKSPACE||a.which===c.ESC)return;if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return;this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&r(a)})),this.search.bind("keyup",this.bind(this.resizeSearch)),this.search.bind("blur",this.bind(function(a){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.clearSearch(),a.stopImmediatePropagation()})),this.container.delegate(b,"mousedown",this.bind(function(b){if(!this.enabled)return;if(a(b.target).closest(".select2-search-choice").length>0)return;this.clearPlaceholder(),this.open(),this.focusSearch(),b.preventDefault()})),this.container.delegate(b,"focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder()})),this.clearSearch()},enable:function(){if(this.enabled)return;this.parent.enable.apply(this,arguments),this.search.removeAttr("disabled")},disable:function(){if(!this.enabled)return;this.parent.disable.apply(this,arguments),this.search.attr("disabled",!0)},initSelection:function(){var a;this.opts.element.val()===""&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&a!==null&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder();a!==b&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.resizeSearch()):this.search.val(" ").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")?this.search.val("").removeClass("select2-default"):this.search.val()===" "&&this.search.val("")},opening:function(){this.parent.opening.apply(this,arguments),this.clearPlaceholder(),this.resizeSearch(),this.focusSearch()},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){i(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer(a,this.data(),this.bind(this.onSelect),this.opts),a!=null&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a){this.addSelectedChoice(a),this.select&&this.postprocessResults(),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.positionDropdown()):this.close(),this.opts.searchClear&&(this.countSelectableResults()>0?(this.clearSearch(),this.close(),this.open()):(this.clearSearch(),this.open())),this.triggerChange({added:a}),this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(b){var c=a("<li class='select2-search-choice'>    <div></div>    <a href='#select2Line2116' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=this.id(b),e=this.getVal(),f;f=this.opts.formatSelection(b,c),c.find("div").replaceWith("<div>"+this.opts.escapeMarkup(f)+"</div>"),c.find(".select2-search-choice-close").bind("mousedown",r).bind("click dblclick",this.bind(function(b){if(!this.enabled)return;a(b.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),this.opts.closeOnRemove?this.close():(this.close(),this.open()),this.focusSearch()})).dequeue(),r(b)})).bind("focus",this.bind(function(){if(!this.enabled)return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active")})),c.data("select2-data",b),c.insertBefore(this.searchContainer),e.push(d),this.setVal(e)},unselect:function(a){var b=this.getVal(),c,d;a=a.closest(".select2-search-choice");if(a.length===0)throw"Invalid argument: "+a+". Must be .select2-search-choice";c=a.data("select2-data"),d=i(this.id(c),b),d>=0&&(b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults()),a.remove(),this.triggerChange({removed:c})},postprocessResults:function(){var a=this.getVal(),b=this.results.find(".select2-result-selectable"),c=this.results.find(".select2-result-with-children"),d=this;b.each2(function(b,c){var e=d.id(c.data("select2-data"));i(e,a)>=0?c.addClass("select2-disabled").removeClass("select2-result-selectable"):c.removeClass("select2-disabled").addClass("select2-result-selectable")}),c.each2(function(a,b){b.find(".select2-result-selectable").length==0?b.addClass("select2-disabled"):b.removeClass("select2-disabled")}),b.each2(function(a,b){if(!b.hasClass("select2-disabled")&&b.hasClass("select2-result-selectable"))return d.highlight(0),!1})},resizeSearch:function(){var a,b,c,d,e,f=l(this.search);a=s(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,e<a&&(e=c-f),e<40&&(e=c-f),this.search.width(e)},getVal:function(){var a;return this.select?(a=this.select.val(),a===null?[]:a):(a=this.opts.element.val(),k(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){i(this,c)<0&&c.push(this)}),this.opts.element.val(c.length===0?"":c.join(this.opts.separator)))},val:function(){var c,d=[],e=this;if(arguments.length===0)return this.getVal();c=arguments[0];if(!c){this.opts.element.val(""),this.updateSelection([]),this.clearSearch();return}this.setVal(c);if(this.select)this.select.find(":selected").each(function(){d.push({id:a(this).attr("value"),text:a(this).text()})}),this.updateSelection(d);else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a(b).map(e.id);e.setVal(c),e.updateSelection(b),e.clearSearch()})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b){var c=this,d;if(arguments.length===0)return this.selection.find(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get();b||(b=[]),d=a.map(b,function(a){return c.opts.id(a)}),this.setVal(d),this.updateSelection(b),this.clearSearch()}}),a.fn.select2=function(){var c=Array.prototype.slice.call(arguments,0),d,g,h,j,k=["val","destroy","opened","open","close","focus","isFocused","container","onSortStart","onSortEnd","enable","disable","positionDropdown","data"];return this.each(function(){if(c.length===0||typeof c[0]=="object")d=c.length===0?{}:a.extend({},c[0]),d.element=a(this),d.element.get(0).tagName.toLowerCase()==="select"?j=d.element.attr("multiple"):(j=d.multiple||!1,"tags"in d&&(d.multiple=j=!0)),g=j?new f:new e,g.init(d);else{if(typeof c[0]!="string")throw"Invalid arguments to select2 plugin: "+c;if(i(c[0],k)<0)throw"Unknown method: "+c[0];h=b,g=a(this).data("select2");if(g===b)return;c[0]==="container"?h=g.container:h=g[c[0]].apply(g,c.slice(1));if(h!==b)return!1}}),h===b?this:h},a.fn.select2.defaults={width:"copy",closeOnSelect:!0,closeOnRemove:!0,searchClear:!1,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c){var d=[];return t(a.text,c.term,d),d.join("")},formatSelection:function(a,c){return a?a.text:b},formatResultCssClass:function(a){return b},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){return"Please enter "+(b-a.length)+" more characters"},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(a==1?"":"s")},formatLoadMore:function(a){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return b.toUpperCase().indexOf(a.toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:A,escapeMarkup:function(a){return a&&typeof a=="string"?a.replace(/&/g,"&amp;"):a},blurOnChange:!1},window.Select2={query:{ajax:u,local:v,tags:w},util:{debounce:o,markMatch:t},"class":{"abstract":d,single:e,multi:f}}}(jQuery),angular.module("ADE").filter("rich",["$filter",function(a){return function(a,b){if(!a)return"";var c=b||100,d;a.split||(a=a.toString());var e=a.split(/\r?\n|\r/);return a=e[0],c<a.length?d=a.substring(0,c)+"...":e.length>1?d=a+"...":d=a,d}}]),angular.module("ADE").directive("adeRich",["ADE","$compile",function(a,b){return{require:"?ngModel",restrict:"A",link:function(c,d,e,f){var g={},h=!1,i=null,j=null,k="",l="",m=0;f!==null&&(f.$render=function(){l=k=f.$modelValue;if(k===undefined||k===null)k="";return f.$viewValue});var n=function(b){l=k,m=b,b!=3&&(k=i.val(),f.$setViewValue(k)),d.show(),j.remove(),h=!1,a.done(g,l,k,m),c.$digest()},o=function(){c.ADE_hidePopup();var e=d.offset(),f=e.left,g=e.top+d[0].offsetHeight,h=k.replace?k.replace(/\n/g,"<br />"):k;if(!h)return;b('<div class="'+a.popupClass+' ade-rich dropdown-menu open" style="left:'+f+"px;top:"+g+'px"><div class="ade-richview">'+h+"</div></div>")(c).insertAfter(d),j=d.next(".ade-rich")},p=function(a){a.style.height="1px",a.style.height=a.scrollHeight+"px"},q=function(){c.ADE_hidePopup();var e='<textarea class="'+g.className+'" style="height:30px">'+k+"</textarea>",f=d.offset(),l=f.left,m=f.top+d[0].offsetHeight;b('<div class="'+a.popupClass+' ade-rich dropdown-menu open" style="left:'+l+"px;top:"+m+'px">'+e+"</div>")(c).insertAfter(d),h=!0,j=d.next(".ade-rich"),i=j.find("textarea");var o=i.val().length;i.focus(),i[0].setSelectionRange(o,o),a.setupBlur(i,n),a.setupKeys(i,n,!0),p(i[0]),i.bind("keyup",function(a){p(this)})};return d.bind("mouseenter",function(b){if(angular.element(".ade-rich").hasClass("open"))return;var c=d.next("."+a.popupClass+"");c.length||o()}),d.bind("mouseleave",function(b){var e=d.next("."+a.popupClass+"");e.length&&!e.find("textarea").length&&c.ADE_hidePopup()}),d.bind("click",function(){if(h)return;h=!0,m=0,a.begin(g),q()}),e.$observe("adeRich",function(b){return g=a.parseSettings(b,{className:"input-xlarge"}),d})}}}]),angular.module("ADE").filter("money",["$filter",function(a){return function(b){var c="",d;return angular.isUndefined(b)?c:(angular.isString(b)&&(b=parseFloat(b.replace(/[$]/g,""))),angular.isNumber(b)&&(d=parseFloat(b),c=d!==0?a("currency")(d):c),c)}}]),angular.module("ADE").filter("percent",function(){return function(a){var b=parseFloat(a),c="";return isNaN(b)||(c=b+"%"),c}}),angular.module("ADE").filter("phone",function(){return function(a){if(!a)return"";angular.isString(a)||(a=a.toString());var b=a.replace(/[\-\.() ]/g,""),c;return c=!isNaN(parseInt(b))&&b.length>=7?'<a href="tel:'+b+'">'+a+"</a>":a,c}}),angular.module("ADE").directive("adeRating",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){var f={},g="",h="",i="";return e!==null&&(e.$render=function(){return h=g=e.$modelValue,e.$viewValue}),c.bind("click",function(c){a.begin(f),h=g,g=angular.element(c.target).data("position"),i=g,a.done(f,h,g,0),e.$setViewValue(g),b.$digest()}),d.$observe("adeRating",function(b){return f=a.parseSettings(b,{}),c})}}}]),angular.module("ADE").filter("rating",function(){return function(a,b){var c=23,d=5,e="rating",f="off",g=10;b&&b.width&&(c=b.width),b&&b.num&&(d=b.num),b&&b.className&&(e=b.className);var h=c*d+g,i='<div class="ade-'+e+'" style="width:'+h+'px;">';i+='<div class="ade-rate-container">';for(var j=0;j<=d;j++)f=j<=a?"on":"off",j===0?i+='<a class="ade-rate-one ade-zero" data-position="'+j+'">&nbsp;</a>':i+='<a class="ade-rate-one ade-'+f+'" data-position="'+j+'"></a>';return i+="</div></div>",i}}),angular.module("ADE").directive("adeText",["ADE","$compile",function(a,b){return{require:"?ngModel",restrict:"A",link:function(c,d,e,f){var g={},h=!1,i=null,j="",k="",l=0;f!==null&&(f.$render=function(){k=j=f.$modelValue;if(j===undefined||j===null)j="";return f.$viewValue});var m=function(b){k=j,l=b,b!=3&&(j=i.val(),f.$setViewValue(j)),d.show(),i.remove(),h=!1,a.done(g,k,j,l),c.$digest()};return d.bind("click",function(){if(h)return;h=!0,l=0,a.begin(g);var e="";g.maxlength!==undefined&&(e="maxlength='"+g.maxlength+"'"),d.hide(),b('<input type="text" class="'+g.className+'" value="'+j+'" '+e+" />")(c).insertAfter(d),i=d.next("input"),i.focus(),a.setupBlur(i,m),a.setupKeys(i,m)}),e.$observe("adeText",function(b){return g=a.parseSettings(b,{className:"input-medium"}),d})}}}]),!function(a){var b=function(b,c){this.$element=a(b),this.isInput=this.$element.is("input"),this.options=a.extend({},a.fn.timepicker.defaults,c,this.$element.data()),this.minuteStep=this.options.minuteStep||this.minuteStep,this.secondStep=this.options.secondStep||this.secondStep,this.showMeridian=this.options.showMeridian||this.showMeridian,this.showSeconds=this.options.showSeconds||this.showSeconds,this.showInputs=this.options.showInputs||this.showInputs,this.disableFocus=this.options.disableFocus||this.disableFocus,this.template=this.options.template||this.template,this.modalBackdrop=this.options.modalBackdrop||this.modalBackdrop,this.defaultTime=this.options.defaultTime||this.defaultTime,this.open=!1,this.init()};b.prototype={constructor:b,init:function(){this.$element.parent().hasClass("input-append")?(this.$element.parent(".input-append").find(".add-on").on("click",a.proxy(this.showWidget,this)),this.$element.on({focus:a.proxy(this.highlightUnit,this),click:a.proxy(this.highlightUnit,this),keypress:a.proxy(this.elementKeypress,this),blur:a.proxy(this.blurElement,this)})):this.template?this.$element.on({focus:a.proxy(this.showWidget,this),click:a.proxy(this.showWidget,this),blur:a.proxy(this.blurElement,this)}):this.$element.on({focus:a.proxy(this.highlightUnit,this),click:a.proxy(this.highlightUnit,this),keypress:a.proxy(this.elementKeypress,this),blur:a.proxy(this.blurElement,this)}),this.$widget=a(this.getTemplate()).appendTo("body"),this.$widget.on({click:a.proxy(this.widgetClick,this),mousedown:a.proxy(this.mousedown,this)}),this.showInputs&&(this.picker=this.$widget.find("input").on({click:function(){this.select()},keypress:a.proxy(this.widgetKeypress,this),change:a.proxy(this.updateFromWidgetInputs,this)})),this.setDefaultTime(this.defaultTime)},showWidget:function(b){b.stopPropagation(),b.preventDefault();if(this.open)return;this.isInput||a(document).on("mousedown",a.proxy(this.hide,this)),this.$element.trigger("show"),this.disableFocus&&this.$element.blur();var c=a.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});this.updateFromElementVal(),a("html").trigger("click.timepicker.data-api").one("click.timepicker.data-api",a.proxy(this.hideWidget,this)),this.template==="modal"?this.$widget.modal("show").on("hidden",a.proxy(this.hideWidget,this)):(this.$widget.css({top:c.top+c.height,left:c.left}),this.open||this.$widget.addClass("open")),this.open=!0,this.$element.trigger("shown")},hideWidget:function(a){var b=Date.parse(this.$element.val());this.time=b!==null?b.getTime()/1e3:"",this.save=a?!0:!1,this.$element.trigger({type:"hide",time:this.time,shouldSave:this.save}),this.template==="modal"?this.$widget.modal("hide"):this.$widget.removeClass("open"),this.open=!1,this.$element.trigger("hidden")},mousedown:function(a){a.stopPropagation(),a.preventDefault()},removeWidget:function(){this.$widget.remove()},widgetClick:function(b){b.stopPropagation(),b.preventDefault();var c=a(b.target).closest("a").data("action");c&&(this[c](),this.update())},widgetKeypress:function(b){var c=a(b.target).closest("input").attr("name");switch(b.keyCode){case 9:this.showMeridian?c=="meridian"&&this.hideWidget():this.showSeconds?c=="second"&&this.hideWidget():c=="minute"&&this.hideWidget();break;case 27:this.hideWidget();break;case 38:switch(c){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 40:switch(c){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.update();break;case 13:this.updateElement(),this.hideWidget()}},elementKeypress:function(a){var b=this.$element.get(0);switch(a.keyCode){case 0:break;case 9:this.updateFromElementVal(),this.showMeridian?this.highlightedUnit!="meridian"&&(a.preventDefault(),this.highlightNextUnit()):this.showSeconds?this.highlightedUnit!="second"&&(a.preventDefault(),this.highlightNextUnit()):this.highlightedUnit!="minute"&&(a.preventDefault(),this.highlightNextUnit());break;case 27:this.updateFromElementVal();break;case 37:this.updateFromElementVal(),this.highlightPrevUnit();break;case 38:switch(this.highlightedUnit){case"hour":this.incrementHour();break;case"minute":this.incrementMinute();break;case"second":this.incrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement();break;case 39:this.updateFromElementVal(),this.highlightNextUnit();break;case 40:switch(this.highlightedUnit){case"hour":this.decrementHour();break;case"minute":this.decrementMinute();break;case"second":this.decrementSecond();break;case"meridian":this.toggleMeridian()}this.updateElement()}a.keyCode!==0&&a.keyCode!==8&&a.keyCode!==9&&a.keyCode!==46&&a.preventDefault()},setValues:function(a){if(this.showMeridian){var b=a.split(" "),c=b[0].split(":");this.meridian=b[1]}else var c=a.split(":");this.hour=parseInt(c[0],10),this.minute=parseInt(c[1],10),this.second=parseInt(c[2],10),isNaN(this.hour)&&(this.hour=0),isNaN(this.minute)&&(this.minute=0);if(this.showMeridian){this.hour>12?this.hour=12:this.hour<1&&(this.hour=1);if(this.meridian=="AM"||this.meridian=="A")this.meridian="am";else if(this.meridian=="PM"||this.meridian=="P")this.meridian="pm";this.meridian!="am"&&this.meridian!="pm"&&(this.meridian="am")}else this.hour>=24?this.hour=23:this.hour<0&&(this.hour=0);this.minute<0?this.minute=0:this.minute>=60&&(this.minute=59),this.showSeconds&&(isNaN(this.second)?this.second=0:this.second<0?this.second=0:this.second>=60&&(this.second=59)),this.$element.val()!=""&&this.updateElement(),this.updateWidget()},setMeridian:function(a){a=="a"||a=="am"||a=="AM"?this.meridian="AM":a=="p"||a=="pm"||a=="PM"?this.meridian="PM":this.updateWidget(),this.updateElement()},setDefaultTime:function(a){if(a){if(a==="current"){var b=new Date,c=b.getHours(),d=Math.floor(b.getMinutes()/this.minuteStep)*this.minuteStep,e=Math.floor(b.getSeconds()/this.secondStep)*this.secondStep,f="am";this.showMeridian&&(c===0?c=12:c>=12?(c>12&&(c-=12),f="pm"):f="am"),this.hour=c,this.minute=d,this.second=e,this.meridian=f}else a==="value"?this.setValues(this.$element.val()):this.setValues(a);this.$element.val()!=""&&this.updateElement(),this.updateWidget()}else this.hour=0,this.minute=0,this.second=0},formatTime:function(a,b,c,d){return a=a,b=b<10?"0"+b:b,c=c<10?"0"+c:c,a+":"+b+(this.showSeconds?":"+c:"")+(this.showMeridian?" "+d:"")},getTime:function(){return this.formatTime(this.hour,this.minute,this.second,this.meridian)},setTime:function(a){this.setValues(a),this.update()},update:function(){this.updateElement(),this.updateWidget()},blurElement:function(){this.highlightedUnit=undefined,this.updateFromElementVal()},updateElement:function(){var a=this.getTime();this.$element.val(a).change();switch(this.highlightedUnit){case"hour":this.highlightHour();break;case"minute":this.highlightMinute();break;case"second":this.highlightSecond();break;case"meridian":this.highlightMeridian()}},updateWidget:function(){this.showInputs?(this.$widget.find("input.bootstrap-timepicker-hour").val(this.hour),this.$widget.find("input.bootstrap-timepicker-minute").val(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("input.bootstrap-timepicker-second").val(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("input.bootstrap-timepicker-meridian").val(this.meridian)):(this.$widget.find("span.bootstrap-timepicker-hour").text(this.hour),this.$widget.find("span.bootstrap-timepicker-minute").text(this.minute<10?"0"+this.minute:this.minute),this.showSeconds&&this.$widget.find("span.bootstrap-timepicker-second").text(this.second<10?"0"+this.second:this.second),this.showMeridian&&this.$widget.find("span.bootstrap-timepicker-meridian").text(this.meridian))},updateFromElementVal:function(a){var b=this.$element.val();b&&(this.setValues(b),this.updateWidget())},updateFromWidgetInputs:function(){var b=a("input.bootstrap-timepicker-hour",this.$widget).val()+":"+a("input.bootstrap-timepicker-minute",this.$widget).val()+(this.showSeconds?":"+a("input.bootstrap-timepicker-second",this.$widget).val():"")+(this.showMeridian?" "+a("input.bootstrap-timepicker-meridian",this.$widget).val():"");this.setValues(b)},getCursorPosition:function(){var a=this.$element.get(0);if("selectionStart"in a)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange(),c=document.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-c}},highlightUnit:function(){var a=this.$element.get(0);this.position=this.getCursorPosition(),this.position>=0&&this.position<=2?this.highlightHour():this.position>=3&&this.position<=5?this.highlightMinute():this.position>=6&&this.position<=8?this.showSeconds?this.highlightSecond():this.highlightMeridian():this.position>=9&&this.position<=11&&this.highlightMeridian()},highlightNextUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMinute();break;case"minute":this.showSeconds?this.highlightSecond():this.highlightMeridian();break;case"second":this.highlightMeridian();break;case"meridian":this.highlightHour()}},highlightPrevUnit:function(){switch(this.highlightedUnit){case"hour":this.highlightMeridian();break;case"minute":this.highlightHour();break;case"second":this.highlightMinute();break;case"meridian":this.showSeconds?this.highlightSecond():this.highlightMinute()}},highlightHour:function(){this.highlightedUnit="hour",this.$element.get(0).setSelectionRange(0,2)},highlightMinute:function(){this.highlightedUnit="minute",this.$element.get(0).setSelectionRange(3,5)},highlightSecond:function(){this.highlightedUnit="second",this.$element.get(0).setSelectionRange(6,8)},highlightMeridian:function(){this.highlightedUnit="meridian",this.showSeconds?this.$element.get(0).setSelectionRange(9,11):this.$element.get(0).setSelectionRange(6,8)},incrementHour:function(){if(this.showMeridian)if(this.hour===11)this.toggleMeridian();else if(this.hour===12)return this.hour=1;if(this.hour===23)return this.hour=0;this.hour=this.hour+1},decrementHour:function(){if(this.showMeridian){if(this.hour===1)return this.hour=12;this.hour===12&&this.toggleMeridian()}if(this.hour===0)return this.hour=23;this.hour=this.hour-1},incrementMinute:function(){var a=this.minute+this.minuteStep-this.minute%this.minuteStep;a>59?(this.incrementHour(),this.minute=a-60):this.minute=a},decrementMinute:function(){var a=this.minute-this.minuteStep;a<0?(this.decrementHour(),this.minute=a+60):this.minute=a},incrementSecond:function(){var a=this.second+this.secondStep-this.second%this.secondStep;a>59?(this.incrementMinute(),this.second=a-60):this.second=a},decrementSecond:function(){var a=this.second-this.secondStep;a<0?(this.decrementMinute(),this.second=a+60):this.second=a},toggleMeridian:function(){this.meridian=this.meridian==="am"?"pm":"am",this.update()},getTemplate:function(){if(this.options.templates[this.options.template])return this.options.templates[this.options.template];if(this.showInputs)var a='<input type="text" name="hour" class="bootstrap-timepicker-hour" maxlength="2"/>',b='<input type="text" name="minute" class="bootstrap-timepicker-minute" maxlength="2"/>',c='<input type="text" name="second" class="bootstrap-timepicker-second" maxlength="2"/>',d='<input type="text" name="meridian" class="bootstrap-timepicker-meridian" maxlength="2"/>';else var a='<span class="bootstrap-timepicker-hour"></span>',b='<span class="bootstrap-timepicker-minute"></span>',c='<span class="bootstrap-timepicker-second"></span>',d='<span class="bootstrap-timepicker-meridian"></span>';var e='<table class="'+(this.showSeconds?"show-seconds":"")+" "+(this.showMeridian?"show-meridian":"")+'">'+"<tr>"+'<td><a href="#" data-action="incrementHour"><i class="icon-chevron-up"></i></a></td>'+'<td class="separator"> </td>'+'<td><a href="#" data-action="incrementMinute"><i class="icon-chevron-up"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="incrementSecond"><i class="icon-chevron-up"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td class="meridian-column"><a href="#" data-action="toggleMeridian"><i class="icon-chevron-up"></i></a></td>':"")+"</tr>"+"<tr>"+"<td>"+a+"</td> "+'<td class="separator">:</td>'+"<td>"+b+"</td> "+(this.showSeconds?'<td class="separator">:</td><td>'+c+"</td>":"")+(this.showMeridian?'<td class="separator"> </td><td>'+d+"</td>":"")+"</tr>"+"<tr>"+'<td><a href="#" data-action="decrementHour"><i class="icon-chevron-down"></i></a></td>'+'<td class="separator"></td>'+'<td><a href="#" data-action="decrementMinute"><i class="icon-chevron-down"></i></a></td>'+(this.showSeconds?'<td class="separator"> </td><td><a href="#" data-action="decrementSecond"><i class="icon-chevron-down"></i></a></td>':"")+(this.showMeridian?'<td class="separator"> </td><td><a href="#" data-action="toggleMeridian"><i class="icon-chevron-down"></i></a></td>':"")+"</tr>"+"</table>",f;switch(this.options.template){case"modal":f='<div class="bootstrap-timepicker modal hide fade in" style="top: 30%; margin-top: 0; width: 200px; margin-left: -100px;" data-backdrop="'+(this.modalBackdrop?"true":"false")+'">'+'<div class="modal-header">'+'<a href="#" class="close" data-dismiss="modal">Ã—</a>'+"<h3>Pick a Time</h3>"+"</div>"+'<div class="modal-content">'+e+"</div>"+'<div class="modal-footer">'+'<a href="#" class="btn btn-primary" data-dismiss="modal">Ok</a>'+"</div>"+"</div>";break;case"dropdown":f='<div class="bootstrap-timepicker dropdown-menu">'+e+"</div>"}return f}},a.fn.timepicker=function(c,d){return this.each(function(){var e=a(this),f=e.data("timepicker"),g=typeof c=="object"&&c;f||e.data("timepicker",f=new b(this,g)),typeof c=="string"&&f[c](d)})},a.fn.timepicker.defaults={minuteStep:15,secondStep:15,disableFocus:!1,defaultTime:"current",showSeconds:!1,showInputs:!0,showMeridian:!0,template:"dropdown",modalBackdrop:!1,templates:{}},a.fn.timepicker.Constructor=b}(window.jQuery),angular.module("ADE").directive("adeTimepop",["$filter",function(a){return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){var f=!1;c.bind("keydown",function(a){if(a.keyCode==13)c.timepicker("updateWidget"),c.timepicker("hideWidget"),c.blur();else if(a.keyCode==27)c.timepicker("hideWidget",!1);else if(f){var b=e.$viewValue,d=c.timepicker().data().timepicker,g=b.split(" "),h=g[0].split(":"),i=parseInt(h[0],10),j=parseInt(h[1],10),k=g[1],l=i<=23?i:23,m=j<=59?j:59;d.hour=l,d.minute=m,d.meridian=k,c.timepicker("updateWidget")}}),c.bind("keydown",function(a){a.keyCode==9&&(c.timepicker("updateWidget"),c.timepicker("hideWidget",!0))}),c.bind("keypress",function(a){var b=[49,50,51,52,53,54,55,56,57,109,112,97,48,58,8,186,13,27,32];f=!1;for(var d=0;d<b.length;d++)if(!f){if(a.keyCode===b[d])return f=!0,c.length<8?f:!1;f=!1}return!1});var g=function(d){var f="",g=g||"12";if(!d.shouldSave){c.context.value=a("time")(e.$viewValue,g);return}d.time&&(f=a("time")(d.time,g)),c.context.value=f,e!==undefined&&e!==null&&e.$setViewValue(d.time),b.$$phase||b.$digest()};return e!==undefined&&e!==null&&(e.$render=function(){if(e.$viewValue){var b=c.timepicker().data().timepicker.options.showMeridian,d=b?a("time")(e.$viewValue):a("time")(e.$viewValue,"24");c.timepicker("setValues",d),c.timepicker("update")}else e.$viewValue===null&&(c.timepicker("setValues",null),c.timepicker("update"));return e.$viewValue}),d.$observe("adeTimepop",function(a){var b={};return angular.isObject(a)&&(b=a),typeof a=="string"&&a.length>0&&(b=angular.fromJson(a)),b.format&&(format=b.format),c.timepicker(b).on("hide.timepicker",g)})}}}]),angular.module("ADE").directive("adeTime",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",link:function(c,d,e,f){var g={},h=!1,i=null,j=null,k=null,l=0;f!==null&&(f.$render=function(){k=j=f.$modelValue;if(j===undefined||j===null)j="";return f.$viewValue});var m=function(b){var e=i.val(),k=j;l=b;if(b!=3){var m=e.split(" "),n=m[0].split(":"),o=parseInt(n[0],10),p=parseInt(n[1],10),q=m[1]||"",r=o<=23?o:23,s=p<=59?p:59,t=r+":"+s+" "+q;j=n.length>1?Date.parse(t).getTime()/1e3:"",f.$setViewValue(j)}d.show(),i.timepicker("removeWidget"),i.remove(),h=!1,a.done(g,k,j,l),c.$digest()};return d.bind("click",function(e){var f,k;if(h)return;h=!0,l=0,j=j||0,a.begin(g),d.hide(),g.format==="24"?(f='"showMeridian":false',k=5):(f='"showMeridian":true',k=5);var n="<input ade-timepop='{"+f+'}\' ng-model="adePickTime1" ng-init="adePickTime1='+j+'" maxlength="'+k+'" type="text" class="'+g.className+'" />';b(n)(c).insertAfter(d),i=d.next("input"),i.focus(),setTimeout(function(){i.focus()}),a.setupBlur(i,m),a.setupKeys(i,m),c.$parent&&c.$parent.$localApply?c.$parent.$localApply():c.$apply()}),e.$observe("adeTime",function(b){return g=a.parseSettings(b,{className:"input-medium"}),d})}}}]),angular.module("ADE").filter("time",function(){return function(a,b){var c="",b=b||"12",d,e,f,g;return angular.isUndefined(a)?c:a==0?c:(angular.isNumber(a)&&(d=new Date(a*1e3)),angular.isDate(d)?(f=d.getHours(),g=d.getMinutes(),b==="12"?(e=f>=12?"pm":"am",f%=12,f=f?f:12,g=g<10?"0"+g:g,c=f+":"+g+" "+e):(g=g<10?"0"+g:g,c=f+":"+g),c):c)}}),angular.module("ADE").directive("adeToggle",["ADE","$compile","$filter",function(a,b,c){return{require:"?ngModel",restrict:"A",link:function(b,c,d,e){var f={},g="",h="",i="",j="";return e!==null&&(e.$render=function(){h=g=e.$modelValue;if(g===undefined||g===null)g="";return e.$viewValue}),c.bind("click",function(c){c.preventDefault(),c.stopPropagation(),a.begin(f),h=g,g=g?!1:!0,i=g,e.$setViewValue(g),a.done(f,h,g,0),b.$digest()}),d.$observe("adeToggle",function(b){return f=a.parseSettings(b,{}),c})}}}]),angular.module("ADE").filter("toggle",function(){return function(a,b){return angular.isString(a)&&(a=="false"||a=="no"||a=="0")&&(a=!1),a?'<span class="ade-'+b+' ade-on">':'<span class="ade-'+b+' ade-off">'}}),angular.module("ADE").filter("url",["$filter",function(a){return function(b){var c=/^(https?:\/\/)([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?$/,d="",e="";return b?(angular.isString(b)||(b=b.toString()),c.test(b)?e=a("linky")(b):b.indexOf(".")>=0?(d="http://"+b,e='<a href="'+d+'">'+d+"</a>"):e=b,e):""}}]);